# Manual do Usu√°rio - Sistema de Gest√£o de Igreja

> **Vers√£o:** 1.0  
> **√öltima atualiza√ß√£o:** Dezembro 2024

---

## Sum√°rio

1. [Primeiros Passos](#1-primeiros-passos)
2. [Dashboard](#2-dashboard)
3. [Gest√£o de Pessoas](#3-gest√£o-de-pessoas)
4. [M√≥dulo Financeiro](#4-m√≥dulo-financeiro)
5. [Cultos e Liturgia](#5-cultos-e-liturgia)
6. [Intercess√£o](#6-intercess√£o)
7. [Jornadas e Ensino](#7-jornadas-e-ensino)
8. [Projetos e Tarefas](#8-projetos-e-tarefas)
9. [Comunica√ß√£o](#9-comunica√ß√£o)
10. [Minha √Årea](#10-minha-√°rea)
11. [Administra√ß√£o](#11-administra√ß√£o)

---

## 1. Primeiros Passos

### 1.1 Acessando o Sistema

1. Acesse o endere√ßo do sistema no navegador
2. Na tela de login, insira seu **email** e **senha**
3. Clique em **"Entrar"**

![Tela de Login](./screenshots/placeholder-login.png)

> _Screenshot: Tela de login do sistema_

### 1.2 Primeiro Acesso (Cadastro)

1. Clique em **"Criar conta"** na tela de login
2. Preencha seu **email** e crie uma **senha**
3. Clique em **"Cadastrar"**
4. Voc√™ receber√° acesso b√°sico automaticamente

![Tela de Cadastro](./screenshots/placeholder-cadastro.png)

> _Screenshot: Formul√°rio de cria√ß√£o de conta_

### 1.3 Autentica√ß√£o Biom√©trica (Opcional)

Ap√≥s o primeiro login, o sistema pode oferecer a op√ß√£o de habilitar desbloqueio biom√©trico:

1. Ao aparecer o di√°logo, clique em **"Habilitar"**
2. Siga as instru√ß√µes do seu dispositivo para configurar
3. Nos pr√≥ximos acessos, use biometria para entrar rapidamente

![Di√°logo Biometria](./screenshots/placeholder-biometria.png)

> _Screenshot: Di√°logo para habilitar autentica√ß√£o biom√©trica_

---

## 2. Dashboard

O Dashboard √© a p√°gina inicial ap√≥s o login. O conte√∫do varia conforme seu perfil de acesso.

### 2.1 Dashboard do Administrador/Pastor

![Dashboard Admin](./screenshots/placeholder-dashboard-admin.png)

> _Screenshot: Dashboard administrativo_

**Elementos dispon√≠veis:**

| Elemento                  | Descri√ß√£o                           |
| ------------------------- | ----------------------------------- |
| Gr√°fico de Fluxo de Caixa | Entradas vs Sa√≠das do m√™s           |
| KPIs de Projetos          | Tarefas atrasadas e projetos ativos |
| Alertas Pastorais         | Membros que precisam de aten√ß√£o     |
| Aniversariantes           | Pr√≥ximos anivers√°rios               |

### 2.2 Dashboard do Membro

![Dashboard Membro](./screenshots/placeholder-dashboard-membro.png)

> _Screenshot: Dashboard do membro_

**Elementos dispon√≠veis:**

| Elemento                 | Descri√ß√£o                 |
| ------------------------ | ------------------------- |
| Carrossel de Comunicados | Banners e avisos ativos   |
| Carteirinha Digital      | QR Code para check-in     |
| Minhas Tarefas           | Tarefas atribu√≠das a voc√™ |
| A√ß√µes R√°pidas            | Bot√µes de acesso r√°pido   |

### 2.3 Notifica√ß√µes

O sino no canto superior direito mostra suas notifica√ß√µes:

1. Clique no **√≠cone de sino** üîî
2. Veja notifica√ß√µes n√£o lidas
3. Clique em uma notifica√ß√£o para ser direcionado

![Notifica√ß√µes](./screenshots/placeholder-notificacoes.png)

> _Screenshot: Painel de notifica√ß√µes_

---

## 3. Gest√£o de Pessoas

### 3.X Pessoas / Membros

- **Onde acessar**: Menu lateral ‚Üí **Pessoas** ‚Üí escolha **Todos**, **Membros**, **Visitantes** ou **Frequentadores** (atalhos principais) ou use a p√°gina inicial de Pessoas.
- **Ao abrir a tela**: voc√™ v√™ cards/estat√≠sticas (totais por status), atalhos r√°pidos, e a lista de pessoas com nome, contato, status e avatar (quando cadastrado). Em dispositivos m√≥veis, os cards podem ocupar mais espa√ßo; role para chegar na lista.
- **Buscar/filtrar** (passo a passo):
  1.  Use a barra de busca (nome, telefone ou email)
  2.  Selecione o filtro de **Status** (Visitante/Frequentador/Membro)
  3.  Confira os contadores por status para validar o filtro
  4.  Role para carregar mais pessoas (infinite scroll)
- **Cadastrar nova pessoa** (passo a passo):
  1.  Clique em **+ Novo** (na lista ou no atalho de Membros/Visitantes)
  2.  Preencha **Nome** (obrigat√≥rio)
  3.  Informe **Telefone ou Email** (recomendado para contato)
  4.  Defina **Status inicial**: Visitante, Frequentador ou Membro
  5.  Salve para concluir o cadastro; a pessoa aparece na listagem
- **Editar pessoa existente** (passo a passo):
  1.  Abra a pessoa pela lista (clique no nome)
  2.  Use **Editar** para ajustar dados pessoais/contatos/status
  3.  Salve; a lista e o perfil s√£o atualizados
- **Campos obrigat√≥rios e valida√ß√µes**: Nome √© obrigat√≥rio; status deve ser um dos valores v√°lidos (Visitante/Frequentador/Membro); contatos ajudam na busca e no follow-up. Em mobile, priorize inserir contato para facilitar a√ß√µes posteriores.
- **Vincular fun√ß√µes/roles ministeriais**: No perfil, acesse a √°rea de status/igreja e atribua fun√ß√µes (quando dispon√≠vel) conforme a lideran√ßa definir.

**Exemplos pr√°ticos**

- Cadastro de novo membro: Pessoas ‚Üí Membros ‚Üí **+ Novo** ‚Üí Nome obrigat√≥rio, telefone/email recomendado, status **membro** ‚Üí Salvar ‚Üí aparece na lista com badge.
- Atualiza√ß√£o de dados: Pessoas ‚Üí Todos ‚Üí abra a pessoa ‚Üí **Editar** ‚Üí ajuste endere√ßo/telefone/status ‚Üí Salvar ‚Üí a listagem reflete as altera√ß√µes.

**Links √∫teis**: [Fluxo Pessoas](diagramas/fluxo-pessoas.md) ¬∑ [Sequ√™ncia Pessoas](diagramas/sequencia-pessoas.md)
**Refer√™ncias complementares**: [BIDIRECTIONAL_RELATIONSHIPS.md](BIDIRECTIONAL_RELATIONSHIPS.md) (lista familiares nos dois sentidos), [AUTHORIZED_GUARDIANS.md](AUTHORIZED_GUARDIANS.md) (respons√°veis autorizados para crian√ßas) e [KIDS_INCLUSION.md](KIDS_INCLUSION.md) (campo de necessidades especiais no Kids).

### 3.1 Acessando o M√≥dulo

1. No menu lateral, clique em **"Pessoas"**
2. O m√≥dulo se expande mostrando as op√ß√µes

![Menu Pessoas](./screenshots/placeholder-menu-pessoas.png)

> _Screenshot: Menu expandido de Pessoas_

### 3.2 Vis√£o Geral

A p√°gina inicial do m√≥dulo mostra:

- **Estat√≠sticas**: Total de pessoas, visitantes, frequentadores e membros
- **Busca r√°pida**: campo para pesquisar por nome, email ou telefone (atalho para `/pessoas/todos?buscar=...`)
- **Acesso r√°pido**: cards para Visitantes, Membros, Frequentadores e Contatos Agendados
- **Altera√ß√µes pendentes**: card com contador e bot√£o "Ver hist√≥rico" (rota do bot√£o: `/pessoas/alteracoes-pendentes` ‚Äî a confirmar; rota configurada em `App.tsx` √© `/pessoas/pendentes`)
- **Aceitaram Jesus**: lista das convers√µes mais recentes (ordenadas por `data_conversao`) com atalho para `/pessoas/todos?aceitou_jesus=true`
- **Links externos de cadastro**: atalhos para formul√°rios p√∫blicos (quando configurados)
- **Aniversariantes**: calend√°rio de anivers√°rios
- **Atividade recente**: √°rea informativa sem eventos (quando n√£o h√° registros)

![Pessoas Vis√£o Geral](./screenshots/placeholder-pessoas-geral.png)

> _Screenshot: Vis√£o geral do m√≥dulo Pessoas_

### 3.3 Cadastrando um Visitante

1. Acesse **Pessoas > Visitantes**
2. Clique em **"+ Novo Visitante"**
3. Preencha os dados:
   - Nome completo
   - Telefone (WhatsApp)
   - Como conheceu a igreja
   - Tipo: Visitante ou Frequentador

![Cadastro Visitante](./screenshots/placeholder-cadastro-visitante.png)

> _Screenshot: Formul√°rio de cadastro de visitante_

4. Clique em **"Salvar"**

### 3.4 Visualizando um Perfil

1. Na lista de pessoas, clique no **nome** da pessoa
2. A p√°gina de detalhes abre com as abas:

| Aba          | Conte√∫do                                   |
| ------------ | ------------------------------------------ |
| **Perfil**   | Resumo de todos os dados (somente leitura) |
| **Pessoais** | Dados pessoais edit√°veis                   |
| **Contatos** | Email, telefone, endere√ßo                  |
| **Igreja**   | Fun√ß√µes e status eclesi√°stico              |
| **Mais**     | Observa√ß√µes e dados adicionais             |

![Perfil Pessoa](./screenshots/placeholder-perfil-pessoa.png)

> _Screenshot: P√°gina de detalhes da pessoa_

### 3.5 Editando Dados

1. Acesse a aba desejada (ex: **Pessoais**)
2. Clique no bot√£o **"Editar"** (√≠cone de l√°pis)
3. Modifique os campos necess√°rios
4. Clique em **"Salvar"**

![Editar Dados](./screenshots/placeholder-editar-dados.png)

> _Screenshot: Di√°logo de edi√ß√£o de dados pessoais_

### 3.6 Promovendo Status

Para promover uma pessoa (Visitante ‚Üí Frequentador ‚Üí Membro):

1. Acesse o perfil da pessoa
2. Na aba **Igreja**, clique em **"Alterar Status"**
3. Selecione o novo status
4. Confirme a altera√ß√£o

![Alterar Status](./screenshots/placeholder-alterar-status.png)

> _Screenshot: Di√°logo de altera√ß√£o de status_

### 3.7 Atribuindo Fun√ß√µes

1. Acesse o perfil da pessoa
2. Na aba **Igreja**, se√ß√£o **"Fun√ß√µes"**
3. Clique em **"+ Atribuir Fun√ß√£o"**
4. Selecione a fun√ß√£o desejada
5. Defina a data de in√≠cio
6. Clique em **"Salvar"**

![Atribuir Fun√ß√£o](./screenshots/placeholder-atribuir-funcao.png)

> _Screenshot: Di√°logo de atribui√ß√£o de fun√ß√£o_

### 3.8 Gerenciando Familiares

Na p√°gina de detalhes da pessoa:

1. Role at√© a se√ß√£o **"Familiares"**
2. Clique em **"+ Adicionar Familiar"**
3. Selecione um membro existente ou cadastre novo
4. Defina o tipo de parentesco
5. Clique em **"Salvar"**

![Familiares](./screenshots/placeholder-familiares.png)

> _Screenshot: Se√ß√£o de familiares no perfil_

---

## 4. M√≥dulo Financeiro

### Vis√£o Geral do M√≥dulo

O m√≥dulo financeiro separa claramente tr√™s conceitos fundamentais para garantir relat√≥rios cont√°beis precisos:

- **Fato Gerador (Compet√™ncia)**: Registra quando e por que o valor foi originado, independente do momento do pagamento
- **Fluxo de Caixa**: Registra quando e como o dinheiro efetivamente entrou ou saiu
- **DRE (Demonstrativo de Resultado)**: Relat√≥rio cont√°bil que mostra o resultado por compet√™ncia

> **Importante**: Esta separa√ß√£o est√° documentada no [ADR-001](adr/ADR-001-separacao-fato-gerador-caixa-dre.md) e √© fundamental para a integridade cont√°bil do sistema.

Para visualizar os fluxos completos:

- [Fluxo Financeiro Geral](diagramas/fluxo-financeiro.md)
- [Sequ√™ncia de Eventos](diagramas/sequencia-financeira.md)
- [Composi√ß√£o do DRE](diagramas/dre.md)

---

### 4.1 Acessando o M√≥dulo

1. No menu lateral, clique em **"Finan√ßas"**
2. O m√≥dulo se expande mostrando as op√ß√µes

![Menu Finan√ßas](./screenshots/placeholder-menu-financas.png)

> _Screenshot: Menu expandido de Finan√ßas_

### 4.2 Dashboard Financeiro

A vis√£o geral financeira mostra:

- **Saldo consolidado** de todas as contas
- **Gr√°ficos** de receitas vs despesas
- **Resumo mensal** com totais

![Dashboard Financeiro](./screenshots/placeholder-dashboard-financeiro.png)

> _Screenshot: Dashboard financeiro_

### 4.3 Registrando uma Entrada (Receita)

#### Cen√°rio 1: Oferta Simples (Fato Gerador + Caixa Simult√¢neos)

1. Acesse **Finan√ßas > Entradas**
2. Clique em **"+ Nova Entrada"**
3. Preencha os campos:

| Campo              | Descri√ß√£o              | Exemplo                         |
| ------------------ | ---------------------- | ------------------------------- |
| Descri√ß√£o          | Nome/motivo da entrada | "Oferta Culto Domingo"          |
| Valor              | Valor em reais         | R$ 500,00                       |
| Data               | Data da transa√ß√£o      | 15/12/2024                      |
| Conta              | Conta de destino       | Conta Corrente                  |
| Categoria          | Classifica√ß√£o cont√°bil | Receitas Operacionais > Ofertas |
| Forma de Pagamento | PIX, Dinheiro, etc.    | PIX                             |

![Nova Entrada](./screenshots/placeholder-nova-entrada.png)

> _Screenshot: Formul√°rio de nova entrada_

4. Clique em **"Salvar"**

**O que acontece:**

- ‚úÖ **Fato Gerador** criado: "Oferta Culto Domingo" em Receitas Operacionais
- ‚úÖ **Caixa** atualizado: +R$ 500 na Conta Corrente
- ‚úÖ **DRE** impactado: +R$ 500 em Receitas do m√™s

---

### 4.4 Registrando uma Sa√≠da (Despesa)

#### Cen√°rio 2: Despesa com Parcelamento (Fato Gerador √önico + M√∫ltiplas Transa√ß√µes de Caixa)

1. Acesse **Finan√ßas > Sa√≠das**
2. Clique em **"+ Nova Sa√≠da"**
3. Preencha os campos:

| Campo              | Descri√ß√£o              | Exemplo                                 |
| ------------------ | ---------------------- | --------------------------------------- |
| Descri√ß√£o          | Natureza da despesa    | "Equipamento de Som"                    |
| Valor              | Valor total            | R$ 3.000,00                             |
| Data               | Data de compet√™ncia    | 10/12/2024                              |
| Conta              | Conta de origem        | Conta Corrente                          |
| Categoria          | Classifica√ß√£o cont√°bil | Despesas Administrativas > Equipamentos |
| Fornecedor         | Quem recebe            | Loja de Som LTDA                        |
| Forma de Pagamento | Como ser√° pago         | Parcelado 3x                            |

![Nova Sa√≠da](./screenshots/placeholder-nova-saida.png)

> _Screenshot: Formul√°rio de nova sa√≠da_

4. **Opcional**: Anexe nota fiscal (imagem ou PDF)
5. Clique em **"Salvar"**

**O que acontece:**

- ‚úÖ **Fato Gerador** criado: "Equipamento de Som" R$ 3.000 em Despesas Administrativas
- ‚úÖ **3 Transa√ß√µes de Caixa** agendadas: R$ 1.000 cada m√™s
- ‚úÖ **DRE de dezembro**: -R$ 3.000 (impacto total no m√™s da compet√™ncia)
- ‚úÖ **Fluxo de Caixa**: -R$ 1.000 por m√™s (impacto mensal conforme pagamento)

> **Nota**: O DRE reflete o valor total no m√™s da decis√£o de compra, independente do parcelamento. O caixa mostra apenas o que saiu efetivamente em cada m√™s.

#### Processamento Autom√°tico de Nota Fiscal

Se voc√™ anexar uma nota fiscal:

1. O sistema usa IA (Gemini) para extrair os dados
2. Os campos s√£o preenchidos automaticamente
3. Revise e ajuste se necess√°rio
4. O fornecedor √© criado automaticamente se n√£o existir

### 4.5 Confirmando Pagamento

Para transa√ß√µes com status "Pendente":

1. Na lista, clique no menu **"‚ãÆ"** da transa√ß√£o
2. Selecione **"Confirmar Pagamento"**
3. Preencha:
   - Data do pagamento
   - Juros (se houver)
   - Multas (se houver)
   - Descontos (se houver)
4. Clique em **"Confirmar"**

![Confirmar Pagamento](./screenshots/placeholder-confirmar-pagamento.png)

> _Screenshot: Di√°logo de confirma√ß√£o de pagamento_

**O que acontece:**

- ‚úÖ Status da transa√ß√£o muda para "Pago"
- ‚úÖ Saldo da conta √© atualizado
- ‚úÖ Juros/multas/descontos **n√£o alteram o DRE** (s√£o ajustes de caixa)
- ‚úÖ Se houver concilia√ß√£o banc√°ria, o lan√ßamento pode ser marcado como conciliado

### 4.6 Filtrando Transa√ß√µes

Use o seletor de per√≠odo no topo:

1. Clique no **MonthPicker**
2. Escolha:
   - **Mensal**: M√™s espec√≠fico ou presets
   - **Customizado**: Per√≠odo personalizado
3. A lista √© filtrada automaticamente

![Filtro Per√≠odo](./screenshots/placeholder-filtro-periodo.png)

> _Screenshot: Seletor de per√≠odo_

### 4.7 Relat√≥rio de Ofertas

1. Acesse **Finan√ßas > Dashboard de Ofertas**
2. Clique em **"+ Novo Relat√≥rio"**
3. Preencha os valores por forma de pagamento
4. Clique em **"Salvar"**
5. Um conferente receber√° notifica√ß√£o para validar

![Relat√≥rio Ofertas](./screenshots/placeholder-relatorio-ofertas.png)

> _Screenshot: Formul√°rio de relat√≥rio de ofertas_

### 4.8 Gerenciando Reembolsos

#### Cen√°rio 3: L√≠der Comprou Material e Precisa Ser Reembolsado

1. **Registre o Fato Gerador (Despesa Real)**

   - Acesse **Finan√ßas > Sa√≠das**
   - Descri√ß√£o: "Material de Evangelismo"
   - Categoria: Despesas Ministeriais > Evangelismo
   - Fornecedor: Papelaria XYZ
   - Valor: R$ 200
   - Observa√ß√µes: "Comprado por Jo√£o Silva - Aguardando reembolso"

2. **Registre a Transa√ß√£o de Caixa (Reembolso ao L√≠der)**
   - Acesse **Finan√ßas > Sa√≠das**
   - Descri√ß√£o: "Reembolso Jo√£o Silva - Material Evangelismo"
   - Categoria: _Mesma categoria do fato gerador_
   - Valor: R$ 200
   - Conta: Caixa ou Transfer√™ncia
   - Marque como "Reembolso" (se dispon√≠vel)

**Resultado:**

- ‚úÖ **DRE**: Registra despesa de R$ 200 em "Evangelismo" (natureza correta)
- ‚úÖ **Caixa**: Registra sa√≠da de R$ 200 para Jo√£o Silva
- ‚úÖ **Rastreabilidade**: Vincula√ß√£o entre o fato gerador e o reembolso

> **Importante**: Reembolsos **n√£o alteram o DRE** porque j√° foram registrados no fato gerador original. O reembolso √© apenas uma movimenta√ß√£o de caixa.

### 4.9 Estornando Lan√ßamentos

#### Estorno de Fato Gerador

Use quando o lan√ßamento foi feito por engano ou precisa ser cancelado:

1. Na lista de transa√ß√µes, clique no menu **"‚ãÆ"**
2. Selecione **"Estornar Fato Gerador"**
3. Informe a justificativa
4. Confirme

**Impacto:**

- ‚ùå **DRE**: O lan√ßamento √© removido (ou marcado como estornado)
- ‚ùå **Caixa**: Se j√° houve pagamento, o estorno n√£o reverte automaticamente (fa√ßa estorno de caixa separadamente)

#### Estorno de Caixa

Use quando o pagamento foi feito por engano mas o fato gerador √© v√°lido:

1. Na lista de transa√ß√µes, clique no menu **"‚ãÆ"**
2. Selecione **"Estornar Pagamento"**
3. Informe a justificativa
4. Confirme

**Impacto:**

- ‚úÖ **DRE**: Permanece inalterado
- ‚ùå **Caixa**: Saldo √© revertido

> **Dica**: Estornos s√£o auditados e registrados em log. Use com cautela e sempre informe uma justificativa clara.

### 4.10 Manuten√ß√£o de Cadastros Financeiros

#### 4.10.1 Bases Ministeriais

Gerencie as grandes √°reas de atua√ß√£o da igreja:

1. Acesse **Finan√ßas > Manuten√ß√£o > Bases Ministeriais**
2. Clique em **"+ Nova Base"** para criar
3. Preencha:
   - **T√≠tulo**: Nome da base (ex: "Base de Adora√ß√£o")
   - **Descri√ß√£o**: Descri√ß√£o opcional
4. Use a busca para filtrar bases existentes
5. Edite ou remova conforme necess√°rio

#### 4.10.2 Categorias e Subcategorias

Organize o plano de contas por tipo de movimenta√ß√£o:

1. Acesse **Finan√ßas > Manuten√ß√£o > Plano de Contas**
2. Escolha a aba **Entradas** ou **Sa√≠das**
3. Para criar categoria:
   - Clique em **"+ Nova Categoria"**
   - Preencha nome e tipo (fixo pela aba atual)
4. Para criar subcategoria:
   - Clique no bot√£o **"+ Sub"** ao lado da categoria pai
   - Preencha o nome
5. Expanda/recolha categorias com o √≠cone de seta
6. Use a busca para localizar rapidamente

**Exemplos de estrutura:**

- **Entradas**: D√≠zimos > D√≠zimo Mensal, Ofertas > Oferta de Miss√µes
- **Sa√≠das**: Pessoal > Sal√°rios, Infraestrutura > Aluguel

#### 4.10.3 Centros de Custo

Defina unidades or√ßament√°rias e projetos:

1. Acesse **Finan√ßas > Manuten√ß√£o > Centros de Custo**
2. Clique em **"+ Novo"**
3. Preencha:
   - **C√≥digo**: Identificador opcional (ex: "CC001")
   - **Nome**: Nome do centro (ex: "Projeto Miss√µes √Åfrica")
4. Use a busca por c√≥digo ou nome

#### 4.10.4 Formas de Pagamento

Configure os meios aceitos pela igreja:

1. Acesse **Finan√ßas > Manuten√ß√£o > Formas de Pagamento**
2. Clique em **"+ Nova Forma"**
3. Preencha o nome (ex: "PIX", "Cart√£o de Cr√©dito")
4. Use os bot√µes para:
   - **Ativar/Desativar**: Habilita ou desabilita temporariamente
   - **Editar**: Altera o nome
   - **Excluir**: Remove permanentemente (s√≥ se n√£o houver transa√ß√µes)

#### 4.10.5 Fornecedores e Parceiros

Cadastre prestadores de servi√ßo:

1. Acesse **Finan√ßas > Manuten√ß√£o > Fornecedores**
2. Clique em **"+ Novo Fornecedor"**
3. Preencha:
   - **Nome**: Nome fantasia ou nome da pessoa
   - **Raz√£o Social**: Raz√£o social (opcional)
   - **CNPJ/CPF**: Documento (opcional)
   - **Telefone**: Contato (opcional)
   - **Email**: Email (opcional)
4. Use a busca para localizar por nome ou documento

#### 4.10.6 Contas Banc√°rias e Caixas

Gerencie contas onde o dinheiro transita:

1. Acesse **Finan√ßas > Manuten√ß√£o > Contas**
2. Clique em **"+ Nova Conta"**
3. Selecione o tipo:
   - **Banc√°ria**: Conta em banco
   - **F√≠sica**: Caixa f√≠sico ou cofre
   - **Virtual**: Carteiras digitais
4. Preencha os dados conforme o tipo
5. O saldo atual √© calculado automaticamente
6. **‚ö†Ô∏è Aten√ß√£o**: Contas com movimenta√ß√µes n√£o podem ser exclu√≠das (apenas desativadas)

> **Dica**: Configure todas as categorias, fornecedores e contas antes de lan√ßar transa√ß√µes para evitar inconsist√™ncias.

---

### 4.11 Visualizando o DRE (Demonstrativo de Resultado)

1. Acesse **Finan√ßas > Pain√©is > DRE**
2. Selecione o **ano** desejado
3. Visualize:
   - Receitas por categoria
   - Despesas por categoria
   - Resultado l√≠quido

![DRE](./screenshots/placeholder-dre.png)

> _Screenshot: Relat√≥rio DRE_

**Interpreta√ß√£o:**

- **Receitas**: Todos os fatos geradores de entrada por compet√™ncia
- **Despesas**: Todos os fatos geradores de sa√≠da por compet√™ncia
- **Resultado**: Receita - Despesa (independente se foi pago ou n√£o)

Para entender a composi√ß√£o do DRE em detalhes, consulte: [Diagrama DRE](diagramas/dre.md)

### 4.11 Reconcilia√ß√£o Banc√°ria

1. Acesse **Finan√ßas > Reconcilia√ß√£o**
2. Selecione a conta banc√°ria
3. Importe o extrato banc√°rio (Excel)
4. O sistema compara lan√ßamentos previstos vs extrato
5. Marque transa√ß√µes conciliadas
6. Identifique diverg√™ncias (juros, taxas, lan√ßamentos n√£o previstos)

**O que acontece:**

- ‚úÖ Transa√ß√µes conciliadas recebem status "Conciliado"

---

### 4.12 Gerenciar Dados (Importa√ß√£o/Exporta√ß√£o)

A tela **Gerenciar Dados** centraliza todas as opera√ß√µes de importa√ß√£o e exporta√ß√£o de dados financeiros, facilitando o fluxo de trabalho da tesouraria.

#### Acessando Gerenciar Dados

**Op√ß√£o 1 - Via menu Finan√ßas:**

1. Acesse **Finan√ßas > Gerenciar Dados**

**Op√ß√£o 2 - Via Entradas ou Sa√≠das:**

1. Na tela de **Entradas** ou **Sa√≠das**, clique no bot√£o **"Importar"** ou **"Exportar"**
2. O sistema abre automaticamente a tab correspondente

![Gerenciar Dados](./screenshots/placeholder-gerenciar-dados.png)

> _Screenshot: Tela Gerenciar Dados com 3 tabs_

---

#### Tab 1: Importar (Transa√ß√µes Financeiras)

Use esta funcionalidade para importar lan√ßamentos em lote a partir de planilhas.

**Passo 1: Upload do Arquivo**

1. Clique na tab **"Importar"**
2. Arraste o arquivo ou clique em **"Selecionar arquivo"**
3. Formatos aceitos: **CSV** ou **XLSX** (at√© 10MB)
4. Se a planilha tiver m√∫ltiplas abas, selecione a aba desejada

![Upload Importa√ß√£o](./screenshots/placeholder-upload-import.png)

> _Screenshot: Upload de arquivo para importa√ß√£o_

**Passo 2: Mapeamento de Colunas**

1. O sistema detecta automaticamente as colunas:
   - **Data**: Colunas com "data" no nome
   - **Descri√ß√£o**: Colunas com "descri" no nome
   - **Valor**: Colunas com "valor" no nome
   - **Categoria, Fornecedor, Conta, etc.**
2. Ajuste o mapeamento manualmente se necess√°rio
3. Clique em **"Pr√≥ximo"**

![Mapeamento Colunas](./screenshots/placeholder-mapeamento.png)

> _Screenshot: Mapeamento de colunas_

**Passo 3: Valida√ß√£o**

1. O sistema valida os dados:
   - ‚úÖ **Data v√°lida**: Formato DD/MM/YYYY ou YYYY-MM-DD
   - ‚úÖ **Descri√ß√£o preenchida**: N√£o pode estar vazia
   - ‚úÖ **Valor v√°lido**: Maior que zero
2. Linhas com erro s√£o destacadas em vermelho
3. Use os checkboxes para **excluir** linhas problem√°ticas
4. Clique em **"Validar"** para reprocessar

![Valida√ß√£o](./screenshots/placeholder-validacao-import.png)

> _Screenshot: Preview com valida√ß√£o_

**Passo 4: Confirma√ß√£o e Importa√ß√£o**

1. Revise o resumo:
   - Total de registros v√°lidos
   - Total de registros exclu√≠dos
   - Valor total a importar
2. Clique em **"Importar"**
3. Aguarde o processamento (chunks de 200 registros)
4. Ao finalizar, voc√™ ver√° uma mensagem de sucesso

![Confirma√ß√£o Import](./screenshots/placeholder-confirmacao-import.png)

> _Screenshot: Confirma√ß√£o de importa√ß√£o_

**O que acontece:**

- ‚úÖ Transa√ß√µes s√£o criadas em lote
- ‚úÖ Registro de tracking em `import_jobs` (hist√≥rico de importa√ß√µes)
- ‚úÖ Saldo das contas √© atualizado
- ‚úÖ DRE e Fluxo de Caixa refletem os lan√ßamentos

---

#### Tab 2: Exportar (Transa√ß√µes Financeiras)

Use para gerar relat√≥rios customizados em Excel.

**Passo 1: Aplicar Filtros**

1. Clique na tab **"Exportar"**
2. Configure os filtros:
   - **Tipo**: Entrada ou Sa√≠da
   - **Status**: Pago, Pendente ou Ambos
   - **Per√≠odo**: Data in√≠cio e data fim
   - **Conta**: Filtre por conta espec√≠fica (opcional)
   - **Categoria**: Filtre por categoria (opcional)

![Filtros Exportar](./screenshots/placeholder-filtros-export.png)

> _Screenshot: Filtros de exporta√ß√£o_

**Passo 2: Selecionar Colunas**

1. Marque as colunas que deseja exportar:
   - Data, Descri√ß√£o, Tipo, Valor
   - Categoria, Conta, Fornecedor
   - Status, Forma de Pagamento, Observa√ß√µes
2. O preview mostra os dados filtrados

![Sele√ß√£o Colunas](./screenshots/placeholder-selecao-colunas.png)

> _Screenshot: Sele√ß√£o de colunas para export_

**Passo 3: Exportar**

1. Clique em **"Exportar para Excel"**
2. O arquivo √© gerado automaticamente
3. Salve em seu computador

**O que acontece:**

- ‚úÖ Dados s√£o formatados automaticamente:
  - Valores monet√°rios: **R$ 1.234,56**
  - Datas: **DD/MM/YYYY**
- ‚úÖ Arquivo Excel (.xlsx) pronto para uso

---

#### Tab 3: Extratos (Importa√ß√£o para Concilia√ß√£o Banc√°ria)

Use para importar extratos banc√°rios e preparar a concilia√ß√£o.

**Passo 1: Selecionar Conta**

1. Clique na tab **"Extratos"**
2. Selecione a **conta banc√°ria** destino
3. Esta sele√ß√£o vincula todas as transa√ß√µes do extrato √† conta

![Selecionar Conta](./screenshots/placeholder-selecao-conta.png)

> _Screenshot: Sele√ß√£o de conta banc√°ria_

**Passo 2: Upload do Extrato**

1. Clique em **"Selecionar arquivo"** ou arraste o arquivo
2. Formatos aceitos:
   - **CSV/XLSX**: Extratos gen√©ricos exportados do banco
   - **OFX**: Formato padr√£o brasileiro (Open Financial Exchange)
3. Tamanho m√°ximo: **10MB**

![Upload Extrato](./screenshots/placeholder-upload-extrato.png)

> _Screenshot: Upload de extrato banc√°rio_

**Passo 3: Mapeamento (CSV/XLSX) ou Auto-detec√ß√£o (OFX)**

**Para arquivos CSV/XLSX:**

1. O sistema detecta colunas automaticamente:
   - **Data**: "data", "dt", "date"
   - **Descri√ß√£o**: "descri", "historico", "memo"
   - **Valor**: "valor", "value", "amount"
   - **Saldo**: "saldo", "balance"
   - **Documento**: "doc", "numero", "ref"
   - **Tipo**: "tipo", "debito", "credito"
2. Ajuste manualmente se necess√°rio
3. Clique em **"Pr√≥ximo"**

**Para arquivos OFX:**

1. O sistema parseia automaticamente os campos:
   - `DTPOSTED` ‚Üí Data da transa√ß√£o
   - `TRNAMT` ‚Üí Valor
   - `MEMO` ou `NAME` ‚Üí Descri√ß√£o
   - `FITID` ou `CHECKNUM` ‚Üí N√∫mero do documento
   - `TRNTYPE` ‚Üí Tipo (cr√©dito/d√©bito)
2. **N√£o requer ajuste manual** de mapeamento

![Mapeamento Extrato](./screenshots/placeholder-mapeamento-extrato.png)

> _Screenshot: Mapeamento de colunas do extrato_

**Passo 4: Valida√ß√£o**

1. O sistema valida os campos obrigat√≥rios:
   - ‚úÖ **Data v√°lida**: Formato reconhecido
   - ‚úÖ **Descri√ß√£o preenchida**: N√£o vazia
   - ‚úÖ **Valor v√°lido**: Diferente de zero
2. Linhas com erro s√£o destacadas
3. Use checkboxes para excluir linhas problem√°ticas
4. O sistema **infere automaticamente o tipo** (cr√©dito/d√©bito):
   - Por sinal do valor (negativo = d√©bito)
   - Por texto da coluna tipo ("d", "deb", "c", "cred")

![Valida√ß√£o Extrato](./screenshots/placeholder-validacao-extrato.png)

> _Screenshot: Valida√ß√£o do extrato com preview_

**Passo 5: Importa√ß√£o**

1. Clique em **"Importar extrato"**
2. O sistema processa em chunks de 200 registros
3. Ao finalizar, exibe contagem de registros importados

**O que acontece:**

- ‚úÖ Transa√ß√µes s√£o gravadas na tabela `extratos_bancarios`
- ‚úÖ Campo `reconciliado` √© marcado como **FALSE** (pendente)
- ‚úÖ Dados ficam dispon√≠veis para **concilia√ß√£o autom√°tica** (pr√≥xima feature)
- ‚úÖ Voc√™ pode visualizar os extratos importados na tela de Concilia√ß√£o

**Formato OFX - Detalhes T√©cnicos:**

O parser OFX extrai os seguintes campos do arquivo:

| Campo OFX   | Campo Sistema    | Descri√ß√£o               |
| ----------- | ---------------- | ----------------------- |
| `DTPOSTED`  | data_transacao   | Data (YYYYMMDD ‚Üí DD/MM) |
| `TRNAMT`    | valor            | Valor da transa√ß√£o      |
| `MEMO/NAME` | descricao        | Descri√ß√£o/Hist√≥rico     |
| `FITID`     | numero_documento | ID √∫nico da transa√ß√£o   |
| `CHECKNUM`  | numero_documento | N√∫mero do cheque/doc    |
| `TRNTYPE`   | tipo             | DEBIT/CREDIT ‚Üí deb/cred |

**Pr√≥ximos Passos (Concilia√ß√£o):**

Ap√≥s importar extratos, voc√™ poder√°:

1. Acessar **Finan√ßas > Concilia√ß√£o Banc√°ria** (a implementar)
2. O sistema sugerir√° **matches autom√°ticos** entre:
   - Transa√ß√µes registradas (`transacoes_financeiras`)
   - Transa√ß√µes do extrato (`extratos_bancarios`)
3. Crit√©rios de match:
   - Mesmo valor (¬± R$ 0,50 toler√¢ncia)
   - Data pr√≥xima (¬± 3 dias √∫teis)
   - Mesma conta banc√°ria
   - Descri√ß√£o similar (scoring de similaridade)
4. A√ß√µes dispon√≠veis:
   - **Aprovar match**: Vincula e marca como reconciliado
   - **Rejeitar**: Mant√©m separado
   - **Criar transa√ß√£o**: Lan√ßamento estava no extrato mas n√£o no sistema

> **Dica**: Importe extratos mensalmente para manter a concilia√ß√£o em dia e identificar rapidamente diverg√™ncias (taxas banc√°rias, juros, erros de lan√ßamento).

---

### 4.13 Fluxo de Trabalho Recomendado

**Di√°rio:**

1. Lance transa√ß√µes conforme ocorrem (Entradas/Sa√≠das)
2. Anexe comprovantes sempre que poss√≠vel
3. Confirme pagamentos ao final do dia

**Semanal:**

1. Revise transa√ß√µes pendentes
2. Reconcilie extrato banc√°rio (importa√ß√£o via Gerenciar Dados)
3. Confira saldo das contas

**Mensal:**

1. Gere relat√≥rio de ofertas
2. Exporte DRE para an√°lise
3. Archive comprovantes f√≠sicos
4. Execute concilia√ß√£o completa (extrato vs lan√ßamentos)

**Trimestral/Anual:**

1. Revise categorias e plano de contas
2. Analise tend√™ncias no dashboard
3. Gere relat√≥rios para presta√ß√£o de contas

---

- ‚ö†Ô∏è Diverg√™ncias s√£o destacadas para ajuste manual
- ‚úÖ Saldo final √© validado contra o extrato

### 4.12 Exportando Dados

Em qualquer lista financeira:

1. Clique no bot√£o **"Exportar"** (√≠cone de download)
2. Um arquivo Excel ser√° baixado com todos os dados filtrados

**Formatos dispon√≠veis:**

- Transa√ß√µes completas (com categoria, fornecedor, forma de pagamento)
- DRE anual
- Proje√ß√µes financeiras

---

### Refer√™ncias T√©cnicas

Para entender melhor a arquitetura financeira e decis√µes t√©cnicas:

- **Decis√£o Arquitetural**: [ADR-001 - Separa√ß√£o Fato Gerador vs Caixa vs DRE](adr/ADR-001-separacao-fato-gerador-caixa-dre.md)
- **Fluxo Visual Completo**: [Diagrama de Fluxo Financeiro](diagramas/fluxo-financeiro.md)
- **Sequ√™ncia Temporal**: [Diagrama de Sequ√™ncia](diagramas/sequencia-financeira.md)
- **Composi√ß√£o do DRE**: [Diagrama DRE](diagramas/dre.md)
- **Funcionalidades Detalhadas**: [Documenta√ß√£o de Funcionalidades](funcionalidades.md#2-m√≥dulo-financeiro)

---

## 5. Cultos e Liturgia

### 5.1 Acessando o M√≥dulo

1. No menu lateral, clique em **"Cultos"**
2. Visualize o calend√°rio de eventos

![Calend√°rio Cultos](./screenshots/placeholder-calendario-cultos.png)

> _Screenshot: Calend√°rio de cultos_

#### O que aparece na tela (Geral)

- Cards com m√©tricas: **Pr√≥ximos Cultos**, **Times Ativos**, **Membros Escalados**, **Realizados**, **M√≠dias Ativas**
- M√≥dulos principais (cards clic√°veis): **Eventos**, **Times**, **Dashboard Liturgia**, **M√≠dias**
- A√ß√µes r√°pidas: **Novo Culto/Evento**, **Gerenciar Times**, **Ver Dashboard Liturgia**, **Gerenciar M√≠dias**

> Evid√™ncia: `src/pages/Cultos.tsx` (redireciona `/cultos` ‚Üí `/cultos/geral`) e `src/pages/cultos/Geral.tsx` (estat√≠sticas, m√≥dulos e a√ß√µes).
> Calend√°rio de eventos ‚Äî (a confirmar)

### 5.2 Criando um Novo Culto

1. Clique em **"+ Novo Culto"**
2. Preencha:
   - T√≠tulo
   - Tipo (Dominical, Especial, etc.)
   - Data e hor√°rio
   - Local
   - Tema (opcional)
   - Pregador (opcional)
3. Clique em **"Salvar"**

![Novo Culto](./screenshots/placeholder-novo-culto.png)

> _Screenshot: Formul√°rio de novo culto_

> Observa√ß√£o: cria√ß√£o/edi√ß√£o ocorre pela p√°gina de **Eventos** (rota `src/pages/cultos/Eventos.tsx`, detalhes ‚Äî (a confirmar)). Atalho de cria√ß√£o pode abrir com par√¢metro `?novo=true`.

### 5.3 Mesa de Controle do Culto

Ao clicar em um culto, voc√™ acessa a **Mesa de Controle** com as abas:

#### Aba Vis√£o Geral

- Informa√ß√µes b√°sicas do culto
- KPIs (dura√ß√£o estimada, volunt√°rios escalados)
- Edi√ß√£o de tema, pregador, status

![Mesa Controle - Geral](./screenshots/placeholder-mesa-controle-geral.png)

> _Screenshot: Aba Vis√£o Geral da Mesa de Controle_

#### Aba Liturgia

Interface dividida em duas colunas:

**Coluna Esquerda - Timeline:**

- Lista orden√°vel de itens da liturgia
- Arraste para reordenar
- Clique para selecionar

**Coluna Direita - Editor:**

- Detalhes do item selecionado
- Recursos de m√≠dia vinculados

![Mesa Controle - Liturgia](./screenshots/placeholder-mesa-controle-liturgia.png)

> _Screenshot: Aba Liturgia da Mesa de Controle_

##### Adicionando Item √† Liturgia

1. Clique em **"+ Adicionar Item"**
2. Preencha:
   - T√≠tulo
   - Tipo (Abertura, Louvor, Prega√ß√£o, etc.)
   - Dura√ß√£o estimada
   - Respons√°vel
3. Clique em **"Salvar"**

##### Vinculando M√≠dia ao Item

Para itens de avisos/an√∫ncios:

1. Selecione o item na timeline
2. No painel direito, se√ß√£o **"Recursos"**
3. Clique em **"+ Adicionar M√≠dia"**
4. Selecione da biblioteca ou fa√ßa upload
5. Defina a dura√ß√£o de exibi√ß√£o (em segundos)

#### Aba M√∫sica

- Lista de m√∫sicas do culto
- Campos: T√≠tulo, Artista, Tom, BPM
- Atribui√ß√£o de Ministro e Solista

![Mesa Controle - M√∫sica](./screenshots/placeholder-mesa-controle-musica.png)

> _Screenshot: Aba M√∫sica da Mesa de Controle_

##### Adicionando M√∫sica

1. Clique em **"+ Adicionar M√∫sica"**
2. Preencha os detalhes
3. Opcional: Adicione links do YouTube/Spotify
4. Clique em **"Salvar"**

#### Aba Escalas

Visualiza√ß√£o e gest√£o dos volunt√°rios escalados:

1. Veja times necess√°rios
2. Para cada posi√ß√£o, selecione um membro
3. Volunt√°rios receber√£o notifica√ß√£o para confirmar

![Mesa Controle - Escalas](./screenshots/placeholder-mesa-controle-escalas.png)

> _Screenshot: Aba Escalas da Mesa de Controle_

### 5.4 Usando Templates

#### Aplicando Template de Liturgia

1. Na aba Liturgia, clique em **"Aplicar Template"**
2. Selecione um template da lista
3. Visualize a pr√©via
4. Clique em **"Aplicar"**
5. Os itens s√£o adicionados automaticamente

![Aplicar Template](./screenshots/placeholder-aplicar-template.png)

> _Screenshot: Di√°logo de sele√ß√£o de template_

#### Salvando como Template

1. Configure a liturgia desejada
2. Clique em **"Salvar como Template"**
3. D√™ um nome e descri√ß√£o
4. Clique em **"Salvar"**

### 5.5 Proje√ß√£o (Tel√£o)

Para apresentar na igreja, utilize um dos modos abaixo (ambos em tela cheia):

#### 5.5.1 Modo Comunicados (`/telao`)

- Fonte: comunicados com `ativo = true` e `exibir_telao = true` (ordem por `ordem_telao`/`created_at`)
- Como abrir: acessar a rota `/telao` no navegador do projetor
- Controles de teclado:

| Tecla               | A√ß√£o                     |
| ------------------- | ------------------------ |
| **‚Üí** ou **Espa√ßo** | Pr√≥ximo slide            |
| **‚Üê**               | Slide anterior           |
| **F**               | Tela cheia               |
| **P**               | Pausar/retomar auto-play |

#### 5.5.2 Modo Liturgia (`/telao-liturgia/:cultoId`)

- Fonte: itens da liturgia (`liturgia_culto`) e recursos vinculados (`liturgia_recursos` ‚Üí `midias`)
- Como abrir: acessar `/telao-liturgia/<ID_DO_CULTO>` a partir da Mesa de Controle
- Realtime: altera√ß√µes na liturgia/recursos atualizam a playlist automaticamente
- Controles de teclado:

| Tecla               | A√ß√£o                       |
| ------------------- | -------------------------- |
| **‚Üí** ou **Espa√ßo** | Pr√≥ximo recurso            |
| **‚Üê**               | Recurso anterior           |
| **F**               | Tela cheia                 |
| **P**               | Pausar/retomar auto-avance |
| **B**               | Tela preta                 |
| **C**               | Tela limpa (neutra)        |

![Tel√£o](./screenshots/placeholder-telao.png)

> _Screenshot: Tela de proje√ß√£o_

> Observa√ß√£o: no modo liturgia, exibe barra de progresso quando definido `duracao_segundos` no recurso.

#### Links de Diagramas (Cultos)

- Fluxo do m√≥dulo: `diagramas/fluxo-cultos.md`
- Sequ√™ncia do m√≥dulo: `diagramas/sequencia-cultos.md`

---

## 5.4 Rel√≥gio de Ora√ß√£o (tipo RELOGIO)

### Acessando o Rel√≥gio

1. No menu de **Eventos**, identifique um evento do tipo **RELOGIO** (√≠cone de rel√≥gio)
2. Clique no evento para abrir **EventoDetalhes**
3. Voc√™ ver√° as tabs adaptadas: **Turnos** (Timeline), **Escalas**, **Check-in**

### Aba Turnos (Timeline Visual)

A Timeline exibe um grid de **24 horas** com slots de volunt√°rios:

#### Layout da Timeline

- **Coluna esquerda**: Horas (00:00 at√© 23:00)
- **Coluna central**: Cards com volunt√°rios por hor√°rio
- **DatePicker no topo**: Navega entre os dias do Rel√≥gio (ex: Rel√≥gio de 7 dias = navega√ß√£o dia a dia)

#### Color Coding dos Slots

| Cor        | Significado                         |
| ---------- | ----------------------------------- |
| üü¢ Verde   | Volunt√°rio confirmou presen√ßa       |
| üü° Amarelo | Pendente de confirma√ß√£o             |
| ‚ö™ Cinza   | Slot vazio (sem volunt√°rio)         |
| üîµ Azul    | Hora atual (destaque em tempo real) |

#### A√ß√µes por Slot

Clique no menu (‚ãÆ) de cada slot para:

- **Editar**: Mudar volunt√°rio ou hor√°rio do turno
- **Duplicar para Amanh√£**: Cria slot id√™ntico no pr√≥ximo dia
- **Remover**: Deleta o turno

#### Adicionando Volunt√°rios com Recorr√™ncia

1. Clique em um slot vazio
2. Abre sheet **"Adicionar Volunt√°rio"**
3. Preencha:
   - **Volunt√°rio**: Busque por nome (combobox com autocomplete)
   - **Hor√°rio**: Defina in√≠cio e fim (defaults v√™m do slot clicado)
   - **Recorr√™ncia**: Escolha um tipo:
     - **Nenhuma**: Apenas este slot
     - **Di√°ria**: Repete todos os dias at√© fim do Rel√≥gio
     - **Semanal**: Repete no mesmo dia da semana
     - **Personalizada**: Selecione dias espec√≠ficos (Seg/Ter/Qua/etc.)
4. Visualize o preview: **"X turnos ser√£o criados em: [datas]"**
5. ‚ö†Ô∏è Se houver conflitos (volunt√°rio j√° escalado nesses dias), aviso aparece
6. Clique **"Adicionar"** para inserir todas as escalas

**Exemplo**: Jo√£o Silva, 14h-16h, Recorr√™ncia Di√°ria ‚Üí cria 7 turnos (um por dia) automaticamente.

### Player de Ora√ß√£o (`/oracao/player/:escalaId`)

#### Acessando o Player

**Op√ß√£o 1 - Via Timeline:**

- Na Timeline, clique em um card de volunt√°rio ‚Üí abre Player daquele turno

**Op√ß√£o 2 - Via Centro de Opera√ß√µes:**

- No Dashboard/Centro de Opera√ß√µes, veja widget **"Rel√≥gio Ativo Agora"**
- Clique **"Entrar no Turno"** ‚Üí abre Player do turno em andamento

#### Interface do Player

Full-screen e imersivo, com:

**Header** (top)

- Barra de progresso segmentada (1 linha = 1 slide)
- Bot√£o fechar (X)
- Nome do evento + t√≠tulo do slide
- Timer do turno em andamento (MM:SS, piscando em vermelho)

**Conte√∫do Central** (2/3 da tela)

- Exibe slide atual (tipo-dependente, ver tabela abaixo)
- Anima√ß√µes slide-in/fade-in para transi√ß√µes

**Footer** (bottom)

- Bot√µes **‚óÄ** (anterior) e **‚ñ∂** (pr√≥ximo)
- Indicador **"X / Y"** (slides)

#### Tipos de Slides e Renderiza√ß√£o

| Tipo                | √çcone | Visual                        | Conte√∫do                             |
| ------------------- | ----- | ----------------------------- | ------------------------------------ |
| `VERSICULO`         | üìñ    | Texto em it√°lico centralizado | Vers√≠culo b√≠blico                    |
| `VIDEO`             | ‚ñ∂Ô∏è    | Container 16:9                | YouTube embed ou fallback            |
| `AVISO`             | üì¢    | T√≠tulo grande + par√°grafo     | An√∫ncio/instru√ß√£o                    |
| `TIMER`             | ‚è±Ô∏è    | Timer em fonte grande         | Contagem regressiva (ex: 30:00)      |
| `PEDIDOS`           | üôè    | Lista com cards               | Pedidos de ora√ß√£o com bot√£o "Orei"   |
| `CUSTOM_TESTEMUNHO` | üí¨    | Card com Quote icon           | Testemunho em cita√ß√£o estilizada     |
| `CUSTOM_SENTIMENTO` | ‚ö†Ô∏è    | Card com AlertCircle          | Alerta espiritual (padr√£o emocional) |
| `CUSTOM_VISITANTES` | üë•    | Grid com avatars              | Cards de visitantes com badges       |

#### Interagindo com Pedidos

No slide de **PEDIDOS**, cada item mostra:

- Nome da pessoa que pediu (ou "An√¥nimo")
- Descri√ß√£o do pedido
- Tipo de pedido (se registrado)

**Marcando "Orei":**

1. Clique no bot√£o ‚ù§Ô∏è (Heart) no canto direito do pedido
2. √çcone muda para ‚úÖ (ThumbsUp) + gradiente verde
3. Status √© salvo no banco (`pedidos_oracao.status = 'em_oracao'`)
4. Voc√™ pode continuar marcando outros pedidos

**Hist√≥rico de Ora√ß√µes:**
Ao abrir o Player, o sistema carrega automaticamente quais pedidos voc√™ j√° marcou como orados (persiste entre aberturas).

#### Navega√ß√£o de Slides

- **Clique ‚óÄ/‚ñ∂**: Avan√ßa ou retrocede
- **√öltima slide**: Clique ‚ñ∂ abre confirma de encerramento ("Turno finalizado! Deus aben√ßoe.")
- **Barra de progresso**: Cada segmento = 1 slide; clique em segmento para ir direto (a confirmar)

#### Player com Conte√∫do Inteligente

Quando um Rel√≥gio √© criado com **tipo*conteudo = BLOCO*\*** (TESTEMUNHO, SENTIMENTO, VISITANTE, PEDIDOS), o Player automaticamente:

1. Chama a Edge Function `playlist-oracao` com `evento_id`
2. Edge Function agrega:
   - **Testemunhos**: √öltimos 3 p√∫blicos
   - **Alerta Espiritual**: An√°lise de sentimentos (se 3+ negativos = cr√≠tico)
   - **Visitantes**: √öltimos 7 dias
   - **Pedidos Broadcast**: Priorit√°rios (status = em_oracao)
   - **Pedidos Pessoais**: Individuais
3. Retorna slides prontos que s√£o injetados no roteiro
4. Voc√™ v√™ conte√∫do **vivo e atualizado** do que a igreja est√° sentindo/orando

### Escalas com Recorr√™ncia

#### O que √© Recorr√™ncia?

Recorr√™ncia permite atribuir o **mesmo volunt√°rio a m√∫ltiplos turnos automaticamente** em vez de adicionar manualmente cada um. √ötil para:

- ‚úÖ Rel√≥gios 24h com 7 dias (n√£o quer adicionar 7 vezes o mesmo nome)
- ‚úÖ Escalas semanais (ex: "Jo√£o sempre faz segunda")
- ‚úÖ Padr√µes fixos (ex: "Mariana seg/qua/sex")

#### 4 Tipos de Recorr√™ncia

1. **Nenhuma** (padr√£o)

   - Apenas 1 slot (data + hor√°rio selecionado)
   - Sem repeti√ß√£o

2. **Di√°ria**

   - Repete **todos os dias** at√© o fim do evento
   - RELOGIO de 7 dias = 7 turnos
   - CULTO com dura√ß√£o de 3 dias = 3 turnos

3. **Semanal**

   - Repete **mesmo dia da semana**
   - Intervalo de 7 dias
   - Ex: Se escolhe ter√ßa ‚Üí repete todas as ter√ßas

4. **Personalizada (Customizada)**
   - Selecione **checkboxes espec√≠ficos** (Seg/Ter/Qua/etc.)
   - Exemplo: segunda + quarta + sexta apenas
   - Gera turnos conforme padr√£o escolhido

#### Como Usar (Passo-a-Passo)

**Cen√°rio**: RELOGIO "Vig√≠lia 24h" com 7 dias. Quer escalar Jo√£o Silva (14h-16h) todos os dias.

1. **Na Timeline**, clique em um **slot vazio** no dia 1, hor√°rio 14h
2. Sheet **"Adicionar Volunt√°rio"** abre
3. **Busque "Jo√£o Silva"** no combobox (autocomplete funciona)
4. **Defina hor√°rio**: 14h at√© 16h (ou ajuste conforme necess√°rio)
5. **Selecione "Di√°ria"** na se√ß√£o Recorr√™ncia
6. **Preview aparece**:
   ```
   ‚úÖ 7 turnos ser√£o criados:
   ‚Ä¢ 30 de Dez (ter√ßa)
   ‚Ä¢ 31 de Dez (quarta)
   ‚Ä¢ 1¬∫ de Jan (quinta)
   ... (at√© o fim do Rel√≥gio)
   ```
7. Se n√£o houver **conflitos** (Jo√£o j√° escalado nesses dias), clique **"Adicionar"**
8. Sistema cria todos os 7 turnos em um comando s√≥
9. Toast confirma: **"7 turnos criados para Jo√£o Silva"**

#### Detec√ß√£o de Conflitos

Se Jo√£o **j√° tem escalas** em alguns dos dias:

```
‚ö†Ô∏è Conflitos detectados:
‚Ä¢ 31 de Dez (j√° est√° escalado 16h-18h)
‚Ä¢ 1¬∫ de Jan (j√° est√° escalado 12h-14h)

Deseja continuar? (inserir√° apenas datas sem conflito)
```

**Op√ß√µes:**

- **Cancelar**: N√£o insere nada
- **Continuar**: Insere apenas nos dias sem conflito (5 de 7)

#### Editando Recorr√™ncias

Se precisar mudar Jo√£o depois:

1. **Na Timeline**, clique no card dele
2. Abre **EscalaSlotDialog** (simples, 1 turno)
3. Edite volunt√°rio/hor√°rio
4. Salve
5. ‚ö†Ô∏è Nota: Edi√ß√£o √© **individual** (apenas 1 turno); para padr√µes recorrentes, considere remover e re-adicionar com novo padr√£o

#### Removendo Turnos

- **Remover 1 turno**: Menu (‚ãÆ) ‚Üí Remover
- **Remover s√©rie inteira**: (a confirmar) Pode ser necess√°rio remover um por um ou via feature futura

---

## 6. Intercess√£o

**Acesso**: Menu lateral ‚Üí **Intercess√£o** ‚Üí expande submenu com op√ß√µes.

### 6.1 Vis√£o Geral (Dashboard)

A p√°gina inicial `/intercessao` exibe:

- **M√≥dulos Principais** (4 cards):
  - **Di√°rio de Ora√ß√£o**: estat√≠sticas de pedidos pendentes e em ora√ß√£o, link para `/intercessao/diario`
  - **Sala de Guerra**: estat√≠stica de intercessores ativos, link para `/intercessao/sala-de-guerra`
  - **Gest√£o de Equipes**: estat√≠stica de testemunhos pendentes, link para `/intercessao/equipes`
  - **Sentimentos**: monitoramento emocional, link para `/intercessao/sentimentos`
- **A√ß√µes R√°pidas**:
  - **"Novo Pedido de Ora√ß√£o"**: abre formul√°rio para criar pedido (link com `?novo=true` ou navega para `/intercessao/pedidos?novo=true`) (a confirmar ‚Äî rota n√£o configurada em `App.tsx`)
  - **"Alocar Pedidos Pendentes"**: dispara aloca√ß√£o autom√°tica balanceada entre intercessores

### 6.2 Pedidos de Ora√ß√£o (Di√°rio de Ora√ß√£o e Sala de Guerra)

#### Visualizando e Filtrando

1. Acesse **Intercess√£o ‚Üí Di√°rio de Ora√ß√£o** (`/intercessao/diario`) ou **Intercess√£o ‚Üí Sala de Guerra** (`/intercessao/sala-de-guerra`)
2. **Listagem** exibe:
   - T√≠tulo/descri√ß√£o do pedido
   - Tipo (sa√∫de, fam√≠lia, financeiro, trabalho, etc.)
   - Status (pendente, alocado, em ora√ß√£o, respondido, arquivado)
   - Intercessor alocado (quando aplic√°vel)
   - Data de cria√ß√£o
3. **Filtros/Abas** por status (todos, pendente, alocado, em ora√ß√£o, respondido, arquivado)
4. **Busca** por palavras-chave
5. **A√ß√£o**: Clique em um pedido para **Ver Detalhes** (modal com observa√ß√µes, historico de aloca√ß√£o, coment√°rios)
6. **Exportar**: Bot√£o para baixar listagem em Excel

#### Criando Novo Pedido (Membro/Visitante)

1. Na tela de Pedidos, clique em **"+ Fazer Novo Pedido de Ora√ß√£o"** (destaque com √≠cone)
2. Preencha:
   - **Pedido** (texto obrigat√≥rio): descri√ß√£o detalhada da necessidade
   - **Tipo** (dropdown): sa√∫de, fam√≠lia, financeiro, trabalho, espiritual, outro
   - **An√¥nimo** (checkbox): marca para ocultar nome/contato
   - **Contato** (se n√£o an√¥nimo): telefone/email para retorno
3. Clique em **"Enviar Pedido"**
   - Pedido criado com `status = pendente`
   - Notifica√ß√£o enviada aos intercessores (a confirmar)

#### Admin: Alocando e Gerenciando

1. Em **Admin/Pastor**, visualize **"Todos os Pedidos"** (tab ou view dedicated)
2. Para um pedido com `status = pendente`:
   - Bot√£o/a√ß√£o **"Alocar Intercessor"** (dropdown com intercessores ordenados por carga)
   - Selecione intercessor e confirme (status muda para `alocado`, data_alocacao preenchida)
3. Para pedido com `status = alocado` ou `em_oracao`:
   - Intercessor pode atualizar observa√ß√µes em campo de texto
   - Admin pode reclassificar status (ex: `em_oracao` ‚Üí `respondido`)
4. **A√ß√µes contextuais**:
   - Visualizar hist√≥rico de altera√ß√µes
   - Anexar/visualizar observa√ß√µes
   - Marcar como respondido (com data_resposta)
   - Arquivar pedido

#### Intercessor: Acompanhando Pedidos

1. Acesse `/intercessao/sala-de-guerra` com role `intercessor`
2. Visualize apenas pedidos alocados a voc√™ (RLS aplicado)
3. Para cada pedido:
   - Veja descri√ß√£o completa, tipo e contato do solicitante
   - Campo de **"Observa√ß√µes do Intercessor"** para registrar: ora√ß√£o realizada, progresso, respostas observadas
   - Bot√£o para marcar como **"Em Ora√ß√£o"** (muda `status = em_oracao`)
   - Bot√£o para marcar como **"Respondido"** (muda `status = respondido`, preenche `data_resposta`)

### 6.3 Gest√£o de Equipes (`/intercessao/equipes`)

#### Listando Intercessores

1. Acesse **Intercess√£o ‚Üí Gest√£o de Equipes**
2. **Listagem** exibe:
   - Nome
   - Email / Telefone
   - Status (ativo/inativo)
   - Pedidos ativos (count)
   - Limite m√°ximo de pedidos
   - √öltimas datas de atualiza√ß√£o
3. **A√ß√µes**:
   - Clique para editar ou visualizar detalhes
   - Inativar (toggle status `ativo = false`)
   - Excluir (se sem pedidos alocados)

#### Cadastrando Intercessor

1. Clique em **"+ Novo Intercessor"** (ou atalho em `/intercessao`)
2. Preencha di√°logo:
   - **Nome** (obrigat√≥rio)
   - **Email** (recomendado)
   - **Telefone** (recomendado)
   - **M√°ximo de Pedidos** (padr√£o 10): limite simult√¢neo para balanceamento
   - **Ativo** (checkbox): habilita para aloca√ß√£o
3. Clique em **"Salvar"**
   - Intercessor criado em tabela `intercessores`
   - Pode come√ßar a receber pedidos imediatamente

#### Editando / Inativando

1. Clique no intercessor na listagem
2. Modifique dados conforme necess√°rio
3. Ao inativar (`ativo = false`), novos pedidos n√£o s√£o alocados; existentes continuam alocados (a confirmar pol√≠tica)
4. Clique em **"Salvar"**

### 6.4 Testemunhos (Di√°rio de Ora√ß√£o e Sala de Guerra)

#### Visualizando e Filtrando

1. Acesse **Intercess√£o ‚Üí Di√°rio de Ora√ß√£o** (pessoal) ou **Intercess√£o ‚Üí Sala de Guerra** (minist√©rio)
2. **Abas por status**:
   - **Aberto**: testemunhos em submiss√£o, aguardando aprova√ß√£o
   - **P√∫blico**: testemunhos aprovados para publica√ß√£o
   - **Arquivado**: hist√≥rico
3. **Filtros**:
   - Por categoria (espiritual, casamento, fam√≠lia, sa√∫de, trabalho, financeiro, ministerial, outro)
   - Busca por palavra-chave/t√≠tulo
4. **Cada testemunho** exibe:
   - T√≠tulo, categoria, autor (ou "An√¥nimo")
   - Snippet de texto
   - Data de cria√ß√£o
5. **A√ß√µes**:
   - Ver detalhes (modal/drawer com texto completo)
   - Clique em testemunho ‚Üí op√ß√µes de **Aprovar para Publica√ß√£o** ou **Arquivar**
   - Exportar listagem em Excel

#### Membro: Enviar Testemunho

1. Em Dashboard ou no **Di√°rio de Ora√ß√£o**, clique em **"+ Novo Testemunho"**
2. Preencha:
   - **T√≠tulo** (obrigat√≥rio)
   - **Categoria** (dropdown)
   - **Mensagem** (texto obrigat√≥rio): relato detalhado da b√™n√ß√£o/milagre
   - **An√¥nimo** (checkbox)
   - **Contato** (se n√£o an√¥nimo)
3. Clique em **"Enviar Testemunho"**
   - Criado com `status = aberto` (aguardando aprova√ß√£o)
   - Notifica√ß√£o enviada para admin/secretaria (a confirmar)

#### Admin: Aprovando Testemunhos

1. Na aba **"Aberto"** da **Sala de Guerra**, visualize testemunhos em submiss√£o
2. Para cada testemunho, clique para abrir detalhes:
   - Revise conte√∫do, categoria, autor
   - Bot√µes:
     - **"Aprovar para Publica√ß√£o"**: status muda para `publico`, `publicar = true`, `data_publicacao = now()`; testemunho exibido no carrossel de dashboard/app para todos os membros
     - **"Arquivar"**: status muda para `arquivado`; n√£o aparece em listagens ativas
3. **Visualize hist√≥rico** de aprova√ß√µes (quem aprovou, quando)

### 6.5 Sentimentos (`/intercessao/sentimentos`)

#### Monitorando Sentimentos de Membros

1. Acesse **Intercess√£o ‚Üí Sentimentos**
2. **Se√ß√£o "Hoje e Pr√≥ximos Dias"**:
   - Gr√°fico de sentimentos registrados no dia (quantos felizes, tristes, ansiosos, etc.)
   - Pode filtrar por per√≠odo (hoje, √∫ltimos 7 dias, √∫ltimos 30 dias)
3. **Alertas Cr√≠ticos**:
   - Exibidos em cards destacados: membros com 3+ dias consecutivos de sentimentos negativos
   - Informa√ß√µes de contato e link para WhatsApp
   - Admin pode enviar mensagem de apoio direto do sistema (a confirmar)
4. **Timeline de Sentimentos por Membro**:
   - Clique em um membro para ver hist√≥rico completo
   - Visualize padr√µes (ex: picos de ansiedade, melhora ap√≥s testemunho)

#### Membro: Registrando Sentimentos

1. **Notifica√ß√£o di√°ria** (√†s 9h): "Como voc√™ est√°?" ‚Üí clique para registrar
2. Ou acesse `/intercessao/sentimentos` diretamente (tela com registro)
3. Selecione sentimento (radio buttons ou dropdown):
   - **Feliz**: sentimento positivo
   - **Triste**: ang√∫stia
   - **Ansioso**: preocupa√ß√£o
   - **Grato**: gratid√£o
   - **Aben√ßoado**: alegria espiritual
   - **Angustiado**: crises
4. **Campo opcional**: "Quer compartilhar?" (texto curto)
5. Clique em **"Registrar"**
   - Sistema analisa sentimento e oferece **"Redirecionamento Inteligente"**:
     - **Se positivo (feliz/grato/aben√ßoado)**: sugest√£o "Compartilhar Testemunho?" ‚Üí link para `/intercessao/testemunhos?novo=true` (a confirmar ‚Äî rota n√£o configurada em `App.tsx`)
     - **Se negativo (triste/ansioso/angustiado)**: sugest√£o "Fazer Pedido de Ora√ß√£o?" ‚Üí link para `/intercessao/pedidos?novo=true` (a confirmar ‚Äî rota n√£o configurada em `App.tsx`)
6. Sentimento registrado em `sentimentos_membros` com timestamp

#### Direcionar Apoio (Admin)

1. Se membro registra 3+ dias negativos seguidos, alerta cr√≠tico aparece no Dashboard
2. Admin recebe notifica√ß√£o (a confirmar) com dados do membro
3. Pode:
   - Enviar mensagem WhatsApp de apoio
   - Navegar para perfil do membro (se√ß√£o Vida Igreja ‚Üí Intercess√£o/Sentimentos)
   - Registrar observa√ß√µes pastorais (em campo de notas do perfil)

**Links √öteis**:

- Fluxo Intercess√£o (Mermaid): [`../diagramas/fluxo-intercessao.md`](../diagramas/fluxo-intercessao.md)
- Sequ√™ncia Intercess√£o (Mermaid): [`../diagramas/sequencia-intercessao.md`](../diagramas/sequencia-intercessao.md)
- Produto ‚Äî Intercess√£o: [`../produto/README_PRODUTO.MD#intercess√£o-ora√ß√£o-e-testemunhos-vis√£o-de-produto`](../produto/README_PRODUTO.MD#intercess√£o-ora√ß√£o-e-testemunhos-vis√£o-de-produto)
- Funcionalidades ‚Äî Intercess√£o: [`../funcionalidades.md#4-intercess√£o-ora√ß√£o-e-testemunhos`](../funcionalidades.md#4-intercess√£o-ora√ß√£o-e-testemunhos)
- Arquitetura ‚Äî Intercess√£o: [`../01-Arquitetura/01-arquitetura-geral.MD#m√≥dulo-intercess√£o-ora√ß√£o-e-testemunhos-vis√£o-t√©cnica`](../01-Arquitetura/01-arquitetura-geral.MD#m√≥dulo-intercess√£o-ora√ß√£o-e-testemunhos-vis√£o-t√©cnica)
- ER ‚Äî Intercess√£o: [`../database-er-diagram.md#intercess√£o-ora√ß√£o-e-testemunhos--entidades-e-rela√ß√µes`](../database-er-diagram.md#intercess√£o-ora√ß√£o-e-testemunhos--entidades-e-rela√ß√µes)

---

## 7. Jornadas e Ensino

### 7.1 Jornadas (Cursos)

#### Criando uma Jornada

1. Acesse **Jornadas** no menu
2. Clique em **"+ Nova Jornada"**
3. Preencha:
   - T√≠tulo
   - Descri√ß√£o
   - Cor do tema
   - **Requer pagamento** (opcional): Marque se o curso √© pago
   - **Valor** (se pago): Defina o valor do curso
4. Clique em **"Salvar"**

#### Cursos Pagos

Para jornadas que requerem pagamento:

1. Ao criar/editar a jornada, marque **"Requer pagamento"**
2. Informe o **valor** do curso
3. Ao inscrever participantes, o status de pagamento inicia como **"Pendente"**
4. Quando o pagamento for confirmado, atualize para **"Pago"**
5. Participantes isentos podem ter status alterado para **"Isento"**

> **Nota**: Pagamentos confirmados podem ser vinculados a transa√ß√µes financeiras (categoria "Cursos e Treinamentos") para rastreabilidade cont√°bil.

![Nova Jornada](./screenshots/placeholder-nova-jornada.png)

> _Screenshot: Formul√°rio de nova jornada_

#### Configurando Etapas

1. Acesse a jornada criada
2. Clique em **"+ Nova Etapa"**
3. Para cada etapa, defina:
   - T√≠tulo
   - **Tipo de conte√∫do**: Texto, V√≠deo, Quiz, Tarefa ou Reuni√£o
   - **URL do conte√∫do** (para v√≠deo): Link do YouTube, Vimeo ou embed
   - **Dura√ß√£o estimada** (minutos): Tempo previsto para conclus√£o
   - **Check autom√°tico**: Se marcado, sistema avan√ßa sozinho ao completar
   - Ordem na sequ√™ncia
4. Clique em **"Salvar"**

##### Configurando Quiz (Tipo Quiz)

1. Ao selecionar tipo **"Quiz"**, configure:
   - **Nota m√≠nima**: Pontua√ß√£o necess√°ria para aprova√ß√£o (ex: 7)
   - **Perguntas**: Lista de quest√µes com alternativas
2. O aluno pode tentar m√∫ltiplas vezes
3. Sistema registra nota, aprova√ß√£o e n√∫mero de tentativas

![Etapas Jornada](./screenshots/placeholder-etapas-jornada.png)

> _Screenshot: Configura√ß√£o de etapas_

#### Kanban de Participantes

1. Visualize as etapas como colunas
2. Cada participante √© um card
3. Arraste para mover entre etapas
4. Veja progresso e respons√°vel

![Kanban Jornada](./screenshots/placeholder-kanban-jornada.png)

> _Screenshot: Board Kanban da jornada_

#### Inscrevendo Participante

1. Clique em **"+ Adicionar Pessoa"**
2. Selecione a pessoa
3. Defina o respons√°vel/discipulador
4. Clique em **"Salvar"**
   Guard-rails (Cultos):

- N√£o mover/renomear/apagar arquivos em /docs
- Apenas COMPLEMENTAR docs existentes
- N√£o inventar telas/fluxos: primeiro listar evid√™ncias no repo (paths e comportamentos)
- Se faltar evid√™ncia, marcar (a confirmar)
- Diagramas Mermaid em docs/diagramas/
- Sa√≠da pronta para commit

#### Usando o Player do Curso (Aluno)

1. Acesse **Meus Cursos** e abra o curso desejado
2. Navegue pelas etapas (v√≠deo/texto/quiz/tarefa/reuni√£o)
3. Etapas com **check autom√°tico** liberam automaticamente quando conclu√≠das; etapas manuais pedem **"Marcar como Conclu√≠do"**
4. Quando **todas as etapas** estiverem conclu√≠das, o player mostra uma tela de celebra√ß√£o e um bot√£o **"Baixar Certificado"** (tamb√©m dispon√≠vel na sidebar)
5. Clique em **"Baixar Certificado"** para gerar o PDF (pode ser necess√°rio permitir pop-ups)

> Observa√ß√£o: Cursos pagos permanecem bloqueados enquanto o pagamento estiver **pendente**; o certificado s√≥ aparece ap√≥s 100% das etapas conclu√≠das.

### 7.2 Ensino (Gest√£o de Aulas)

#### Agendando uma Aula

1. Acesse **Ensino** no menu
2. Clique em **"+ Nova Aula"**
3. Preencha:
   - Jornada vinculada
   - Tema
   - Data e hor√°rio
   - Modalidade (Presencial/Online/H√≠brido)
   - Sala (se presencial)
4. Clique em **"Salvar"**

![Nova Aula](./screenshots/placeholder-nova-aula.png)

> _Screenshot: Drawer de nova aula_

#### Registrando Presen√ßas (Check-in Manual)

1. Acesse **Ensino** e escolha a aula do dia.
2. Clique em **"Check-in Manual"**.
3. Filtre/busque a crian√ßa ou aluno.
4. Confirme o registro; presen√ßas duplicadas s√£o avisadas.
5. Opcional: imprima etiqueta de seguran√ßa quando dispon√≠vel.

### 7.3 Minist√©rio Infantil (Kids)

#### Configurando Salas

1. Acesse **Ensino > Configura√ß√µes**
2. Clique em **"+ Nova Sala"**
3. Preencha:
   - Nome (ex: "Sala 1 - Ber√ß√°rio")
   - Capacidade m√°xima
   - Idade m√≠nima e m√°xima
4. Clique em **"Salvar"**

![Nova Sala](./screenshots/placeholder-nova-sala.png)

> _Screenshot: Formul√°rio de sala_

#### Fazendo Check-in de Crian√ßa

1. Acesse **Ensino > Minist√©rio Infantil**
2. Selecione a aula do dia
3. Clique em **"+ Check-in"**
4. Selecione a crian√ßa
5. Sistema gera etiquetas de seguran√ßa

![Check-in Kids](./screenshots/placeholder-checkin-kids.png)

> _Screenshot: Tela de check-in_

#### Imprimindo Etiquetas

Ap√≥s o check-in:

1. Clique em **"Imprimir Etiquetas"**
2. Sistema gera:
   - **Etiqueta da Crian√ßa**: Nome, sala, c√≥digo de seguran√ßa
   - **Etiqueta do Respons√°vel**: Nome da crian√ßa, c√≥digo

![Etiquetas](./screenshots/placeholder-etiquetas.png)

> _Screenshot: Preview das etiquetas_

#### Fazendo Check-out

1. Na lista de presentes, localize a crian√ßa
2. Clique em **"Check-out"**
3. Confirme o respons√°vel que est√° retirando
4. Verifique o c√≥digo de seguran√ßa

**Links relacionados**

- Funcionalidades ‚Äî Jornadas e Ensino: `funcionalidades.md#5-jornadas-e-ensino`
- Produto ‚Äî Jornadas e Ensino: `produto/README_PRODUTO.MD#jornadas-e-ensino-vis√£o-de-produto`
- Diagramas: `diagramas/fluxo-ensino.md`, `diagramas/sequencia-ensino.md`, `diagramas/fluxo-cursos-pagos.md`

---

## 8. Projetos e Tarefas

### 8.1 Criando um Projeto

1. Acesse **Projetos** no menu
2. Clique em **"+ Novo Projeto"**
3. Preencha:
   - T√≠tulo
   - Descri√ß√£o
   - L√≠der respons√°vel
   - Data de in√≠cio e fim prevista
4. Clique em **"Salvar"**

![Novo Projeto](./screenshots/placeholder-novo-projeto.png)

> _Screenshot: Formul√°rio de novo projeto_

### 8.2 Kanban de Tarefas

Ao acessar um projeto:

1. Visualize tr√™s colunas:
   - **N√£o Iniciado**
   - **Em Execu√ß√£o**
   - **Finalizado**
2. Arraste tarefas entre colunas
3. A barra de progresso atualiza automaticamente

![Kanban Tarefas](./screenshots/placeholder-kanban-tarefas.png)

> _Screenshot: Board de tarefas_

### 8.3 Criando Tarefas

1. Clique em **"+ Nova Tarefa"**
2. Preencha:
   - T√≠tulo
   - Descri√ß√£o
   - Respons√°vel
   - Prioridade (Baixa/M√©dia/Alta)
   - Data de vencimento
3. Clique em **"Salvar"**

![Nova Tarefa](./screenshots/placeholder-nova-tarefa.png)

> _Screenshot: Formul√°rio de tarefa_

### 8.4 Tarefas Atrasadas

Tarefas vencidas aparecem destacadas em **vermelho**. O dashboard tamb√©m mostra um contador de tarefas atrasadas.

---

## 9. Comunica√ß√£o

O m√≥dulo de Comunica√ß√£o permite que lideran√ßa e secretaria criem e publiquem comunicados institucionais (avisos, banners, alertas) manualmente, controlando onde e quando ser√£o exibidos (app, tel√£o/projetor, site).

**Observa√ß√£o:** Este m√≥dulo √© para cria√ß√£o editorial de conte√∫do. Notifica√ß√µes autom√°ticas de sistema s√£o gerenciadas em outro m√≥dulo.

### 9.1 Acessando o M√≥dulo

- **Onde acessar**: Menu lateral ‚Üí **Comunica√ß√£o** ou **Publica√ß√£o** (ou navegue para `/comunicados`).
- **Ao abrir a tela**: voc√™ v√™ a lista de comunicados existentes com t√≠tulo, status (ativo/inativo), canais de exibi√ß√£o (app, tel√£o, site) e datas de in√≠cio/fim.
- **Permiss√µes**: apenas administradores e lideran√ßa podem criar/editar comunicados (RLS `comunicados_gestao_admin`).

![Hub Publica√ß√£o](./screenshots/placeholder-hub-publicacao.png)

> _Screenshot: Hub de publica√ß√£o_

### 9.2 Criando um Comunicado (passo a passo)

1. Acesse **Comunica√ß√£o** ‚Üí **Comunicados**
2. Clique em **"+ Novo Comunicado"**
3. Preencha os dados no wizard de 3 passos:

#### Passo 1: Conte√∫do

- **T√≠tulo** (obrigat√≥rio): nome do comunicado
- **Tipo**: escolha **Banner** (visual com imagem) ou **Alerta** (mensagem de urg√™ncia)
- **Descri√ß√£o/Mensagem**: texto do comunicado (para alertas, √© obrigat√≥rio)
- **Imagem**: fa√ßa upload ou selecione uma m√≠dia da biblioteca
  - Formatos aceitos: imagem (JPG, PNG) ou v√≠deo (a confirmar)
  - Armazenamento: storage bucket p√∫blico `comunicados`
- **Link de a√ß√£o** (opcional): URL para direcionar quando o usu√°rio clicar

![Comunicado Passo 1](./screenshots/placeholder-comunicado-passo1.png)

> _Screenshot: Passo 1 - Conte√∫do_

#### Passo 2: Canais de Publica√ß√£o

Defina onde o comunicado ser√° exibido (m√∫ltipla escolha):

- ‚òê **App/Dashboard**: aparece no carrossel do dashboard dos membros
- ‚òê **Tel√£o/Projetor**: entra na playlist do ProPresenter ou sistema de proje√ß√£o
  - Pode definir **ordem de exibi√ß√£o** no tel√£o (campo `ordem_telao`)
  - Pode enviar **arte alternativa** para tel√£o (16:9 vs 9:16 no campo `url_arquivo_telao`)
- ‚òê **Site P√∫blico**: exibido no carrossel do site da igreja

**Observa√ß√£o:** Um comunicado pode ser publicado em m√∫ltiplos canais simultaneamente.

![Comunicado Passo 2](./screenshots/placeholder-comunicado-passo2.png)

> _Screenshot: Passo 2 - Canais_

#### Passo 3: Agendamento e Categoriza√ß√£o

- **Data de in√≠cio**: quando o comunicado come√ßa a ser exibido
- **Data de fim** (opcional): quando expira automaticamente
- **N√≠vel de urg√™ncia** (a confirmar): para prioriza√ß√£o visual
- **Categoria de m√≠dia** (opcional): `geral`, `eventos`, `liturgia` (campo `categoria_midia`)
- **Tags** (opcional): para organiza√ß√£o (ex.: `Abertura`, `Louvor`, `Avisos Gerais`)
- **Vincular a culto** (opcional): associa o comunicado a um culto espec√≠fico (FK `culto_id`)

![Comunicado Passo 3](./screenshots/placeholder-comunicado-passo3.png)

> _Screenshot: Passo 3 - Agendamento_

4. Clique em **"Publicar"** para ativar o comunicado

### 9.3 Editando e Gerenciando Comunicados

- **Visualizar lista**: Na tela principal de Comunicados, voc√™ v√™ todos os comunicados cadastrados com contadores por status.
- **Editar**: Clique no comunicado desejado para abrir o di√°logo de edi√ß√£o (mesmo wizard de 3 passos).
- **Ativar/Desativar**: Use o toggle de status `ativo` para pausar ou retomar a exibi√ß√£o sem excluir o comunicado.
- **Excluir**: Clique em **Excluir** (√≠cone de lixeira); a imagem vinculada ser√° removida do storage `comunicados` se n√£o estiver em uso por outros registros.

### 9.4 Hist√≥rico e Status

- **Status dispon√≠veis**: `ativo` (sendo exibido) ou `inativo` (pausado/expirado).
- **Contadores**: A tela exibe quantos comunicados est√£o cadastrados e quantos est√£o ativos no momento.
- **Filtros** (a confirmar): buscar por t√≠tulo, filtrar por canal de exibi√ß√£o, ordenar por data de cria√ß√£o/atualiza√ß√£o.

### 9.5 Definindo P√∫blico-Alvo

**Observa√ß√£o:** A segmenta√ß√£o de p√∫blico no m√≥dulo Comunica√ß√£o √© feita por **canal de exibi√ß√£o** (app, tel√£o, site), n√£o por perfis de usu√°rio individuais.

- **App/Dashboard**: todos os membros logados veem os comunicados ativos no carrossel do dashboard.
- **Tel√£o**: exibido durante cultos/eventos para toda a congrega√ß√£o presente.
- **Site P√∫blico**: vis√≠vel para visitantes e p√∫blico geral no site da igreja.

N√£o h√° segmenta√ß√£o por roles (admin, membro, visitante) ou grupos espec√≠ficos dentro do m√≥dulo. Para comunica√ß√£o direcionada (ex.: apenas l√≠deres), use outros canais (a confirmar) ou ajuste as permiss√µes de acesso √†s p√°ginas.

### 9.6 Visualiza√ß√£o nos Canais

#### No App/Dashboard

- Membros veem os comunicados ativos no **carrossel de banners** (`BannerCarousel.tsx`) na tela principal.
- Query: `SELECT * FROM comunicados WHERE ativo = true AND exibir_app = true AND (data_inicio <= NOW() AND (data_fim IS NULL OR data_fim >= NOW()))`.

#### No Tel√£o/Projetor

- Comunicados com `exibir_telao = true` s√£o consumidos pela p√°gina `/telao` (`Telao.tsx`).
- Exibi√ß√£o em carrossel autom√°tico com controles de navega√ß√£o e pausa.
- Ordem definida pelo campo `ordem_telao`.

#### No Site P√∫blico

- Comunicados com `exibir_site = true` s√£o exibidos no carrossel do site (integra√ß√£o a confirmar).

**Links √∫teis**: (diagrama de fluxo de comunica√ß√£o a criar)

**Refer√™ncias complementares**: [Vis√£o de produto ‚Äî Comunica√ß√£o](produto/README_PRODUTO.MD)

### 9.3 Biblioteca de M√≠dias

1. Acesse **M√≠dias** no menu
2. Visualize todas as imagens e v√≠deos
3. Use filtros por tags

#### Adicionando M√≠dia

1. Clique em **"+ Nova M√≠dia"**
2. Fa√ßa upload do arquivo
3. Preencha t√≠tulo e descri√ß√£o
4. Adicione tags para categoriza√ß√£o
5. Clique em **"Salvar"**

![Nova M√≠dia](./screenshots/placeholder-nova-midia.png)

> _Screenshot: Upload de m√≠dia_

---

## 10. Notifica√ß√µes

O m√≥dulo de **Notifica√ß√µes** entrega alertas autom√°ticos do sistema diretamente para voc√™, baseado em eventos relevantes da sua √°rea de atua√ß√£o (role). Diferente da **Comunica√ß√£o** (que √© cria√ß√£o manual de avisos), as notifica√ß√µes s√£o **disparadas automaticamente** pelo sistema sempre que algo importante acontece.

### 10.1 Acessando Notifica√ß√µes

1. No canto superior direito da barra de navega√ß√£o, clique no **√≠cone de sino üîî**
2. Um popover abre com a lista de notifica√ß√µes recentes
3. Notifica√ß√µes **n√£o lidas** aparecem com uma bolinha azul √† esquerda e fundo branco
4. Notifica√ß√µes j√° lidas ficam acinzentadas

![Sino de Notifica√ß√µes](./screenshots/placeholder-sino-notificacoes.png)

> _Screenshot: Popover de notifica√ß√µes_

### 10.2 Tipos de Notifica√ß√µes

As notifica√ß√µes s√£o categorizadas automaticamente:

- **üí∞ Financeiro**: nova conta a pagar, reembolso aguardando aprova√ß√£o
- **üë∂ Kids**: check-in realizado, ocorr√™ncia/choro de crian√ßa
- **üôè Intercess√£o**: novo pedido de ora√ß√£o cadastrado
- **üëã Recep√ß√£o**: novo visitante registrado no sistema
- **‚ö†Ô∏è Alerta**: situa√ß√µes cr√≠ticas ou de urg√™ncia
- **üìÖ Agenda**: lembretes de escalas ou cultos

Cada tipo tem **√≠cone e cor pr√≥prios** para r√°pida identifica√ß√£o visual.

### 10.3 Interagindo com Notifica√ß√µes

#### Ver detalhes:

- Clique sobre a notifica√ß√£o para **ser redirecionado** √† tela correspondente (ex: clicar em "Nova Conta a Pagar" leva ao Financeiro)

#### Marcar como lida:

- Ao clicar, a notifica√ß√£o √© **automaticamente marcada como lida**
- Voc√™ tamb√©m pode clicar em **"Limpar"** (bot√£o no topo) para marcar **todas como lidas de uma vez**

#### Excluir:

- Passe o mouse sobre uma notifica√ß√£o e clique no **√≠cone de lixeira** que aparece √† direita

![A√ß√µes de Notifica√ß√£o](./screenshots/placeholder-acoes-notificacao.png)

> _Screenshot: A√ß√µes em notifica√ß√µes_

### 10.4 Canais de Entrega

Voc√™ pode receber notifica√ß√µes por at√© **3 canais diferentes**, dependendo da configura√ß√£o do seu cargo:

1. **In-App (Sininho)**: sempre ativo, aparece na barra superior do sistema
2. **Push Notification**: alerta no navegador mesmo com aba fechada (requer permiss√£o)
3. **WhatsApp**: mensagem via Meta API ou Make (a confirmar por evento)

> üîê **Permiss√£o Push**: na primeira vez, o navegador solicitar√° permiss√£o para enviar notifica√ß√µes. Aceite para receber alertas em tempo real.

### 10.5 Configura√ß√µes de Notifica√ß√µes (Admin)

Se voc√™ √© **Administrador**, pode gerenciar quais eventos disparam notifica√ß√µes e para quem:

1. Acesse **Admin > Notifica√ß√µes**
2. Voc√™ ver√° **cards de eventos** agrupados por categoria (Financeiro, Kids, Pessoas, Intercess√£o)
3. Para cada evento, h√° uma **tabela de destinat√°rios** (roles) e **switches de canais**:
   - üîî **In-App**: sininho no sistema
   - üì± **Push**: notifica√ß√£o no navegador/celular
   - üí¨ **WhatsApp**: via integra√ß√£o externa

#### Adicionar destinat√°rio:

1. Clique em **"+ Add"** no card do evento
2. Selecione o **role** (cargo) no dropdown
3. O destinat√°rio √© criado com canais padr√£o ativos

#### Ativar/Desativar canal:

- Use os **switches** (toggle) para ativar/desativar canais por destinat√°rio
- Exemplo: "Tesoureiro recebe apenas in-app e push, sem WhatsApp"

#### Remover destinat√°rio:

- Passe o mouse sobre a linha e clique no **√≠cone de lixeira**

![Admin Notifica√ß√µes](./screenshots/placeholder-admin-notificacoes.png)

> _Screenshot: Tela de configura√ß√£o de notifica√ß√µes (admin)_

### 10.6 Eventos Dispon√≠veis

Principais eventos que podem disparar notifica√ß√µes autom√°ticas:

| Evento                           | Categoria   | Quando dispara                         |
| -------------------------------- | ----------- | -------------------------------------- |
| `financeiro_conta_vencer`        | Financeiro  | Nova conta a pagar cadastrada          |
| `financeiro_reembolso_aprovacao` | Financeiro  | Reembolso aguardando aprova√ß√£o         |
| `kids_checkin`                   | Kids        | Crian√ßa fez check-in no minist√©rio     |
| `kids_ocorrencia`                | Kids        | Registrada ocorr√™ncia/choro de crian√ßa |
| `novo_visitante`                 | Pessoas     | Novo visitante cadastrado no sistema   |
| `pedido_oracao`                  | Intercess√£o | Novo pedido de ora√ß√£o recebido         |

> üìå **Nota**: A lista de eventos √© expans√≠vel. Novos eventos podem ser adicionados conforme necessidades operacionais da igreja.

### 10.7 Diferen√ßa: Notifica√ß√µes vs. Comunica√ß√£o

| Aspecto          | Notifica√ß√µes                        | Comunica√ß√£o                       |
| ---------------- | ----------------------------------- | --------------------------------- |
| **Origem**       | Autom√°tica (evento do sistema)      | Manual (cria√ß√£o humana)           |
| **Conte√∫do**     | Template fixo (ex: "Nova conta X")  | Livre (banners, avisos, editoria) |
| **Destinat√°rio** | Definido por role/cargo             | P√∫blico geral (app/tel√£o/site)    |
| **Objetivo**     | Alerta operacional / a√ß√£o requerida | Informa√ß√£o institucional          |
| **Edi√ß√£o**       | N√£o edit√°vel (gerado pelo sistema)  | Totalmente edit√°vel               |

> **Regra de ouro**: Se √© uma **rea√ß√£o a um evento do sistema**, √© Notifica√ß√£o. Se √© **conte√∫do criado manualmente para comunicar algo**, √© Comunica√ß√£o.

---

## 11. Minha √Årea

### 10.1 Perfil

1. Clique no seu **avatar** no menu
2. Selecione **"Perfil"**

![Menu Perfil](./screenshots/placeholder-menu-perfil.png)

> _Screenshot: Menu do usu√°rio_

#### Alterando Foto

1. Clique na foto de perfil
2. Tire uma foto ou selecione da galeria
3. Ajuste o enquadramento
4. Clique em **"Confirmar"**

![Upload Foto](./screenshots/placeholder-upload-foto.png)

> _Screenshot: Di√°logo de foto de perfil_

#### Alterando Senha

1. Na aba **"Conta"**
2. Clique em **"Alterar Senha"**
3. Digite a nova senha
4. Confirme e clique em **"Salvar"**

### 10.2 Minhas Escalas

1. Acesse **Minhas Escalas** no menu
2. Visualize escalas atribu√≠das a voc√™
3. Para cada escala:
   - Clique em **"Confirmar"** para aceitar
   - Clique em **"Recusar"** e informe o motivo

![Minhas Escalas](./screenshots/placeholder-minhas-escalas.png)

> _Screenshot: Lista de escalas_

### 10.3 Minha Fam√≠lia

1. Acesse **Minha Fam√≠lia** no menu
2. Visualize dependentes cadastrados
3. Clique em **"+ Adicionar Dependente"** para cadastrar filhos

![Minha Fam√≠lia](./screenshots/placeholder-minha-familia.png)

> _Screenshot: P√°gina Minha Fam√≠lia_

### 10.4 Meus Cursos

1. Acesse **Meus Cursos** no menu
2. Visualize jornadas em que est√° inscrito
3. Clique em um curso para continuar estudando

![Meus Cursos](./screenshots/placeholder-meus-cursos.png)

> _Screenshot: Lista de cursos_

#### Inscri√ß√£o em Cursos Pagos (Aluno)

Algumas jornadas/cursos podem exigir pagamento para liberar o conte√∫do. O sistema diferencia cursos gratuitos e pagos para garantir uma experi√™ncia clara e segura.

**Como inscrever-se**

1. Acesse **Minha √Årea > Meus Cursos**.
2. Use as abas no topo:
   - **Meus cursos**: cursos j√° inscritos (com progresso e status).
   - **Dispon√≠veis**: cursos abertos para inscri√ß√£o.
3. Na aba **Dispon√≠veis**, escolha o curso:
   - Se estiver marcado como **Pago**, o cart√£o exibe o **valor (R$)**.
4. Clique em **Inscrever-se**:
   - Cursos **gratuitos**: a inscri√ß√£o √© imediata e o acesso √© liberado.
   - Cursos **pagos**: uma transa√ß√£o financeira de **entrada** √© criada com **status pendente** e sua inscri√ß√£o fica com **status_pagamento: pendente**.

**O que voc√™ ver√° ap√≥s a inscri√ß√£o paga**

- No painel **Meus cursos**, o curso aparece com o badge **‚ÄúAguardando Pagamento‚Äù**.
- Ao tentar abrir o **Player**, o acesso fica **bloqueado** at√© a confirma√ß√£o de pagamento.
- Ap√≥s a confirma√ß√£o (baixa no m√≥dulo financeiro), o status muda para **pago** e o conte√∫do √© liberado.

**Dicas e avisos**

- Caso veja um aviso de **configura√ß√£o financeira ausente**, procure a secretaria/tesouraria para ajustar a conta de recebimento (a confirmar conforme pol√≠tica interna).
- Formas de pagamento como **PIX/Cart√£o** n√£o aparecem no app do aluno neste fluxo (a confirmar integra√ß√£o); a baixa √© registrada administrativamente no m√≥dulo financeiro.

**Fluxo visual (Mermaid)**

- Consulte o diagrama: [Fluxo de Cursos Pagos](diagramas/fluxo-cursos-pagos.md)

### 10.5 Registrando Sentimento

1. No dashboard, clique em **"Como voc√™ est√°?"**
2. Selecione seu sentimento atual
3. Adicione uma mensagem (opcional)
4. Clique em **"Registrar"**

![Registrar Sentimento](./screenshots/placeholder-registrar-sentimento.png)

> _Screenshot: Di√°logo de sentimento_

---

## 11. Administra√ß√£o

### 11.1 Painel Administrativo

1. Acesse **Admin** no menu (apenas administradores)
2. Visualize:
   - Edge Functions configuradas
   - Status de execu√ß√£o
   - Logs de erros

![Painel Admin](./screenshots/placeholder-painel-admin.png)

> _Screenshot: Painel administrativo_

### 11.2 Gerenciando Fun√ß√µes de Igreja

1. Acesse **Admin > Fun√ß√µes**
2. Visualize fun√ß√µes cadastradas
3. Clique em **"+ Nova Fun√ß√£o"** para adicionar
4. Edite ou desative fun√ß√µes existentes

### 11.3 Configura√ß√µes da Igreja

1. Acesse **Configura√ß√µes** no menu lateral
2. Se√ß√µes dispon√≠veis:

**Modo de Manuten√ß√£o:**

- Ativar/desativar modo manuten√ß√£o (bloqueia acesso ao sistema)
- Permitir acesso p√∫blico durante manuten√ß√£o
- Personalizar mensagem de manuten√ß√£o

**Informa√ß√µes B√°sicas:**

- Nome da igreja
- Subt√≠tulo
- Logo (upload com preview)

**Webhooks de Integra√ß√£o:**

- Card com link para p√°gina dedicada `/admin/webhooks`
- Gerenciamento seguro de URLs de webhook (valores mascarados)

**Notifica√ß√µes & Plant√£o Pastoral:**

- Telefone do plant√£o pastoral (para alertas cr√≠ticos)
- Provedor WhatsApp: Make.com, Meta Official API, ou Evolution API
- Campos de credenciais variam conforme provedor selecionado

**IA & Chatbot:**

- Card "Chatbots & Intelig√™ncia Artificial" confirma visualmente se o `OPENAI_API_KEY` est√° presente
- Bot√£o **Gerenciar Chatbots & IAs** redireciona para a tela administrativa `/admin/chatbots`
- Dica exibida lembra que os prompts/modelos s√£o ajustados nessa tela dedicada

![Configura√ß√µes Igreja](./screenshots/placeholder-config-igreja.png)

> _Screenshot: Configura√ß√µes da igreja_

### 11.3.1 Webhooks de Integra√ß√£o

P√°gina dedicada em `/admin/webhooks` para gerenciar webhooks de forma segura:

1. Acesse via card "Webhooks de Integra√ß√£o" nas Configura√ß√µes
2. Webhooks dispon√≠veis:
   - **MAKE_WEBHOOK_URL**: Webhook principal do Make.com
   - **MAKE_WEBHOOK_LITURGIA**: Webhook para notifica√ß√µes de liturgia
3. Valores s√£o mascarados por seguran√ßa (exibe `‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢`)
4. Clique em "Atualizar" para inserir novo valor via formul√°rio seguro

### 11.3.2 Chatbots & IAs

1. Acesse **Configura√ß√µes ‚Üí Chatbots & Intelig√™ncia Artificial** e clique em **Gerenciar Chatbots & IAs**
2. Tela lista cada chatbot com status (Ativo/Inativo), edge function vinculada e modelos escolhidos (texto, √°udio, vis√£o)
3. Use o bot√£o **Novo Chatbot** para cadastrar, informando nome, descri√ß√£o opcional e edge function (ex.: `chatbot-triagem`)
4. Edite prompts (roles) por canal diretamente no modal e ative/desative bots via toggle
5. Exclus√µes pedem confirma√ß√£o em di√°logo para evitar remo√ß√µes acidentais

### 11.4 Gest√£o de Permiss√µes (Admin)

#### Vis√£o Geral

Acesse **Admin > Permiss√µes** para gerenciar a matriz de permiss√µes por cargo. A interface exibe uma tabela com permiss√µes agrupadas por m√≥dulo em accordion expans√≠vel.

![Matriz de Permiss√µes](./screenshots/placeholder-admin-permissions.png)

> _Screenshot: Matriz de permiss√µes com controles tri-state_

#### Controles Tri-State por M√≥dulo

No cabe√ßalho de cada m√≥dulo (ex: Financeiro, Comunicados, Kids), voc√™ ver√° indicadores por cargo:

- **‚úÖ Verde (CheckCircle)**: Todas as permiss√µes do m√≥dulo est√£o ativas para aquele cargo
- **‚ûñ Amarelo (tra√ßo horizontal)**: Algumas permiss√µes ativas, outras n√£o (estado parcial)
- **‚≠ï Cinza (XCircle)**: Nenhuma permiss√£o ativa

**Como usar:**

1. Clique no indicador para alternar entre ativar/desativar todas as permiss√µes do m√≥dulo
2. Se estado for "nenhuma" ou "parcial" ‚Üí Ativa todas
3. Se estado for "todas ativas" ‚Üí Desativa todas
4. Cargos sistema (admin) n√£o podem ser editados

#### Clonagem de Permiss√µes

Economize tempo copiando permiss√µes de um cargo existente:

1. Localize o cabe√ßalho da coluna do cargo destino (ex: "L√≠der J√∫nior")
2. Clique no bot√£o **Copy** (√≠cone de copiar)
3. Dropdown exibe cargos dispon√≠veis como origem
4. Selecione o cargo fonte (ex: "L√≠der")
5. Sistema calcula diferen√ßas e sincroniza automaticamente:
   - Adiciona permiss√µes ausentes
   - Remove permiss√µes extras
6. Toast confirma opera√ß√£o: "Permiss√µes de 'L√≠der' copiadas para 'L√≠der J√∫nior'. 12 altera√ß√µes pendentes."

**Dica:** Use esta funcionalidade ao criar cargos similares (ex: L√≠der ‚Üí L√≠der J√∫nior, Secret√°rio ‚Üí Secret√°rio Assistente).

#### Dialog de Confirma√ß√£o Visual

Antes de salvar, revise todas as altera√ß√µes:

1. Fa√ßa altera√ß√µes na matriz (tri-state, clonagem, toggles individuais)
2. Clique em **Salvar Altera√ß√µes (X)** no canto superior
3. Modal exibe resumo agrupado por cargo:
   - **Adicionar (verde)**: ‚úÖ Financeiro View, ‚úÖ Comunicados Manage
   - **Remover (vermelho)**: ‚ùå Kids Manage, ‚ùå Ensino Editar
4. Revise a lista (scroll√°vel se houver muitas altera√ß√µes)
5. Escolha:
   - **Cancelar**: Fecha modal, mant√©m altera√ß√µes pendentes
   - **Confirmar Salvar**: Persiste no banco de dados

![Confirma√ß√£o de Permiss√µes](./screenshots/placeholder-permissions-confirm.png)

> _Screenshot: Dialog de confirma√ß√£o com diff visual_

#### Dicas de Uso

- **Estado efetivo**: A interface considera altera√ß√µes n√£o salvas ao calcular tri-state e clonagem
- **Batch operations**: Controles em massa evitam cliques repetitivos
- **Auditoria**: Todas as altera√ß√µes s√£o registradas com timestamp e autor
- **Undo**: Ap√≥s salvar, bot√£o "Desfazer" aparece no toast por 10 segundos

#### Desfazendo Altera√ß√µes de Permiss√µes (Rollback)

Se voc√™ cometeu um erro ao alterar permiss√µes, pode desfazer facilmente:

1. **Abra a aba "Hist√≥rico"** na tela de Permiss√µes
2. **Localize o grupo de altera√ß√µes** que deseja reverter (data/hora √© exibida)
3. **Clique no bot√£o Undo2** (√≠cone de seta para tr√°s) √† direita do grupo
4. **Confirme** no dialog que aparece
5. **Pronto!** As altera√ß√µes foram desfeitas e a matriz √© recarregada

O hist√≥rico mostra quem fez cada mudan√ßa, quando, e que permiss√µes foram alteradas. Todas as opera√ß√µes ficam registradas para auditoria, mesmo as revers√µes.

**Nota:** Voc√™ s√≥ pode desfazer suas pr√≥prias altera√ß√µes (ou as de outros admins, se tiver permiss√£o de auditoria).

---

### 11.5 Links Externos e QR Codes

Na p√°gina de Pessoas:

1. Encontre o card **"Links Externos"**
2. Copie links para:
   - Cadastro de visitante
   - Atualiza√ß√£o de membro
3. Baixe QR Codes para impress√£o

![Links Externos](./screenshots/placeholder-links-externos.png)

> _Screenshot: Card de links externos_

---

## Ap√™ndice A: Atalhos de Teclado

### Tel√£o (Proje√ß√£o)

| Tecla           | A√ß√£o                     |
| --------------- | ------------------------ |
| `‚Üí` ou `Espa√ßo` | Pr√≥ximo slide            |
| `‚Üê`             | Slide anterior           |
| `F`             | Alternar tela cheia      |
| `P`             | Pausar/retomar auto-play |
| `B`             | Tela preta               |
| `C`             | Limpar tela              |
| `Esc`           | Sair da tela cheia       |

---

## Ap√™ndice B: Gloss√°rio

| Termo                | Defini√ß√£o                                          |
| -------------------- | -------------------------------------------------- |
| **Visitante**        | Pessoa que visitou a igreja pela primeira vez      |
| **Frequentador**     | Pessoa que frequenta regularmente mas n√£o √© membro |
| **Membro**           | Pessoa oficialmente membro da igreja               |
| **Intercessor**      | Membro dedicado a orar pelos pedidos recebidos     |
| **Jornada**          | Trilha de aprendizado/curso com m√∫ltiplas etapas   |
| **Escala**           | Atribui√ß√£o de volunt√°rio para servir em um culto   |
| **Mesa de Controle** | Interface de gest√£o completa de um culto           |
| **DRE**              | Demonstrativo de Resultado do Exerc√≠cio            |

---

## Ap√™ndice C: Experi√™ncia Mobile

### Dialogs Responsivos

O sistema adapta automaticamente a interface para dispositivos m√≥veis:

- **Desktop (‚â•768px)**: Dialogs aparecem como modais centralizados
- **Mobile (<768px)**: Dialogs se transformam em drawers (bottom sheet) que deslizam de baixo para cima

**Vantagens no mobile:**

- Melhor uso do espa√ßo vertical limitado
- Intera√ß√£o nativa (deslizar para fechar)
- Conte√∫do mais acess√≠vel sem scroll excessivo

### Safe Areas (iPhone)

A interface respeita as √°reas seguras do dispositivo:

- **Notch/Dynamic Island**: Conte√∫do n√£o fica oculto pela √°rea do sensor
- **Home indicator**: Bot√µes e controles ficam acima da barra de gesto
- **Margens laterais**: Respeitadas em dispositivos com bordas arredondadas

### Otimiza√ß√µes iOS

- **Zoom autom√°tico desabilitado**: Campos de texto n√£o disparam zoom ao focar (fonte 16px)
- **Scroll suave**: Listas e cards otimizados para toque
- **Touch targets**: Bot√µes e links com √°rea m√≠nima de 44x44px

### Navega√ß√£o Mobile

- **Select em vez de Tabs**: Em telas como Visitantes e Aniversariantes, abas s√£o substitu√≠das por dropdown para economizar espa√ßo
- **Collapsible sections**: Se√ß√µes podem ser colapsadas para facilitar navega√ß√£o vertical
- **Cards compactos**: Layout adaptado para exibir informa√ß√µes essenciais sem excesso de whitespace

---

## Ap√™ndice D: Suporte

Em caso de d√∫vidas ou problemas:

1. Verifique este manual
2. Entre em contato com o administrador do sistema
3. Reporte bugs ou sugest√µes

---

> **Nota**: Este manual cont√©m placeholders para screenshots. Substitua os arquivos em `docs/screenshots/` pelas imagens reais do sistema.

---

_Documento gerado em Dezembro de 2024_
